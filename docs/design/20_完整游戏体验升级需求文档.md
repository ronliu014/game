# å®Œæ•´æ¸¸æˆä½“éªŒå‡çº§éœ€æ±‚æ–‡æ¡£

## æ–‡æ¡£ä¿¡æ¯
- **ç‰ˆæœ¬**: v1.0.0
- **ä½œè€…**: Claude Code
- **æ—¥æœŸ**: 2026-01-23
- **çŠ¶æ€**: å·²æ‰¹å‡†

---

## 1. è®¾è®¡ç›®æ ‡

### 1.1 æ€»ä½“ç›®æ ‡
å°†å½“å‰çš„MVPç‰ˆæœ¬ï¼ˆv0.2.0ï¼‰å‡çº§ä¸ºå®Œæ•´çš„æ¸¸æˆä½“éªŒï¼ŒåŒ…æ‹¬å®Œå–„çš„UIç³»ç»Ÿã€åœºæ™¯åˆ‡æ¢æµç¨‹ã€å…³å¡ç®¡ç†ç³»ç»Ÿå’Œæ‰“åŒ…å‘å¸ƒæœºåˆ¶ã€‚

### 1.2 æ ¸å¿ƒç›®æ ‡
1. **å®Œæ•´çš„æ¸¸æˆæµç¨‹**: ä»å¯åŠ¨åˆ°ç»“æŸçš„å®Œæ•´ç”¨æˆ·ä½“éªŒ
2. **ä¸“ä¸šçš„UIç³»ç»Ÿ**: å¯é…ç½®çš„ç¾æœ¯èµ„æºï¼Œæ˜“äºåæœŸæ›¿æ¢
3. **çµæ´»çš„åœºæ™¯ç®¡ç†**: æ¸…æ™°çš„åœºæ™¯åˆ‡æ¢é€»è¾‘
4. **æ¸è¿›å¼å…³å¡ç³»ç»Ÿ**: å…³å¡è§£é”æœºåˆ¶ï¼Œå¢åŠ æ¸¸æˆæ·±åº¦
5. **å¯å‘å¸ƒçš„æ‰“åŒ…ç³»ç»Ÿ**: æ”¯æŒCI/CDï¼Œä¾¿äºå¯¹å¤–å‘å¸ƒ

### 1.3 è®¾è®¡åŸåˆ™
- **èµ„æºå¯é…ç½®**: æ‰€æœ‰ç¾æœ¯ã€éŸ³æ•ˆèµ„æºé€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†ï¼Œæ˜“äºæ›¿æ¢
- **å ä½ç¬¦ä¼˜å…ˆ**: ä½¿ç”¨ä¸´æ—¶èµ„æºå®ŒæˆåŠŸèƒ½ï¼Œé¢„ç•™æ­£å¼èµ„æºæ¥å£
- **æ¨¡å—åŒ–è®¾è®¡**: å„ä¸ªåœºæ™¯ç‹¬ç«‹å¼€å‘ï¼Œä¾¿äºç»´æŠ¤
- **ç”¨æˆ·ä½“éªŒä¼˜å…ˆ**: æµç•…çš„è¿‡æ¸¡ã€æ¸…æ™°çš„åé¦ˆã€ç¬¦åˆç›´è§‰çš„æ“ä½œ

---

## 2. æ•´ä½“æ¶æ„è®¾è®¡

### 2.1 åœºæ™¯ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SceneManager                          â”‚
â”‚                  (åœºæ™¯ç®¡ç†å™¨)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - åœºæ™¯æ ˆç®¡ç†                                            â”‚
â”‚  - åœºæ™¯åˆ‡æ¢é€»è¾‘                                          â”‚
â”‚  - åœºæ™¯ç”Ÿå‘½å‘¨æœŸç®¡ç†                                       â”‚
â”‚  - è¿‡æ¸¡åŠ¨ç”»æ§åˆ¶                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“               â†“               â†“               â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ å¯åŠ¨åœºæ™¯  â”‚    â”‚ åŠ è½½åœºæ™¯  â”‚    â”‚ æ¸¸æˆåœºæ™¯  â”‚    â”‚ ç»“ç®—åœºæ™¯  â”‚
    â”‚MainMenu  â”‚    â”‚ Loading  â”‚    â”‚ Gameplay â”‚    â”‚ Result   â”‚
    â”‚Scene     â”‚    â”‚Scene     â”‚    â”‚Scene     â”‚    â”‚Scene     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 åœºæ™¯åˆ‡æ¢æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯åŠ¨æ¸¸æˆ  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MainMenuScene â”‚ â† â”€ â”€ â”€ â”€ â”€ â”€ â”
â”‚  (å¯åŠ¨åœºæ™¯)     â”‚                â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”˜                â”‚
      â”‚     â”‚                    â”‚
  é€‰æ‹©éš¾åº¦ é€€å‡ºæ¸¸æˆ               â”‚
      â”‚     â”‚                    â”‚
      â†“     â†“                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ Loading  â”‚ â”‚  é€€å‡ºåº”ç”¨  â”‚       â”‚
â”‚ Scene    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚(åŠ è½½åœºæ™¯) â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â”‚
      â†“                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚ GameplayScene â”‚               â”‚
â”‚  (æ¸¸æˆåœºæ™¯)    â”‚               â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                â”‚
      â”‚    â”‚                    â”‚
  å®Œæˆå…³å¡ é€€å‡ºå…³å¡               â”‚
      â”‚    â”‚                    â”‚
      â†“    â”” â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ResultScene   â”‚
â”‚ (ç»“ç®—åœºæ™¯)     â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
      â”‚    â”‚
  ä¸‹ä¸€å…³å¡ è¿”å›ä¸»èœå•
      â”‚    â”‚
      â”” â”€ â”€â”´ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”
                              â”‚
    â”Œ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Loading  â”‚
â”‚ Scene    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 æ¨¡å—ä¾èµ–å…³ç³»

```
src/
â”œâ”€â”€ scenes/                    # åœºæ™¯æ¨¡å—ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ scene_base.py         # åœºæ™¯åŸºç±»
â”‚   â”œâ”€â”€ scene_manager.py      # åœºæ™¯ç®¡ç†å™¨
â”‚   â”œâ”€â”€ main_menu_scene.py    # å¯åŠ¨åœºæ™¯
â”‚   â”œâ”€â”€ loading_scene.py      # åŠ è½½åœºæ™¯
â”‚   â”œâ”€â”€ gameplay_scene.py     # æ¸¸æˆåœºæ™¯ï¼ˆå°è£…ç°æœ‰é€»è¾‘ï¼‰
â”‚   â””â”€â”€ result_scene.py       # ç»“ç®—åœºæ™¯
â”œâ”€â”€ ui/                        # UIç»„ä»¶æ¨¡å—ï¼ˆæ‰©å±•ï¼‰
â”‚   â”œâ”€â”€ components/           # åŸºç¡€UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ button.py
â”‚   â”‚   â”œâ”€â”€ panel.py
â”‚   â”‚   â”œâ”€â”€ label.py
â”‚   â”‚   â”œâ”€â”€ progress_bar.py
â”‚   â”‚   â””â”€â”€ image.py
â”‚   â”œâ”€â”€ layouts/              # å¸ƒå±€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ layout_manager.py
â”‚   â”‚   â””â”€â”€ anchor.py
â”‚   â””â”€â”€ themes/               # ä¸»é¢˜ç³»ç»Ÿï¼ˆèµ„æºé…ç½®ï¼‰
â”‚       â””â”€â”€ default_theme.json
â”œâ”€â”€ progression/               # è¿›åº¦ç³»ç»Ÿï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ level_progression.py  # å…³å¡è¿›åº¦ç®¡ç†
â”‚   â”œâ”€â”€ save_manager.py       # å­˜æ¡£ç®¡ç†
â”‚   â””â”€â”€ unlock_system.py      # è§£é”ç³»ç»Ÿ
â””â”€â”€ build/                     # æ‰“åŒ…æ„å»ºï¼ˆæ–°å¢ï¼‰
    â”œâ”€â”€ builder.py            # æ„å»ºè„šæœ¬
    â””â”€â”€ package_config.json   # æ‰“åŒ…é…ç½®
```

---

## 3. è¯¦ç»†è®¾è®¡æ–¹æ¡ˆ

### 3.1 åœºæ™¯ç³»ç»Ÿè®¾è®¡

#### 3.1.1 åœºæ™¯åŸºç±»ï¼ˆSceneBaseï¼‰

**åŠŸèƒ½**:
- å®šä¹‰åœºæ™¯ç”Ÿå‘½å‘¨æœŸæ¥å£
- æä¾›åœºæ™¯é—´æ•°æ®ä¼ é€’æœºåˆ¶
- ç®¡ç†åœºæ™¯èµ„æºåŠ è½½/å¸è½½

**æ ¸å¿ƒæ¥å£**:
```python
class SceneBase(ABC):
    """åœºæ™¯åŸºç±»"""

    @abstractmethod
    def on_enter(self, data: Optional[Dict] = None) -> None:
        """åœºæ™¯è¿›å…¥æ—¶è°ƒç”¨"""
        pass

    @abstractmethod
    def on_exit(self) -> None:
        """åœºæ™¯é€€å‡ºæ—¶è°ƒç”¨"""
        pass

    @abstractmethod
    def update(self, delta_ms: float) -> None:
        """æ›´æ–°åœºæ™¯é€»è¾‘"""
        pass

    @abstractmethod
    def draw(self, renderer: Renderer) -> None:
        """ç»˜åˆ¶åœºæ™¯"""
        pass

    @abstractmethod
    def handle_event(self, event: pygame.event.Event) -> None:
        """å¤„ç†è¾“å…¥äº‹ä»¶"""
        pass
```

#### 3.1.2 åœºæ™¯ç®¡ç†å™¨ï¼ˆSceneManagerï¼‰

**åŠŸèƒ½**:
- ç®¡ç†åœºæ™¯æ ˆ
- æ§åˆ¶åœºæ™¯åˆ‡æ¢
- å¤„ç†åœºæ™¯è¿‡æ¸¡åŠ¨ç”»

**æ ¸å¿ƒæ–¹æ³•**:
```python
class SceneManager:
    """åœºæ™¯ç®¡ç†å™¨"""

    def push_scene(self, scene: SceneBase, data: Optional[Dict] = None) -> None:
        """æ¨å…¥æ–°åœºæ™¯ï¼ˆä¿ç•™å½“å‰åœºæ™¯ï¼‰"""
        pass

    def pop_scene(self) -> None:
        """å¼¹å‡ºå½“å‰åœºæ™¯ï¼ˆè¿”å›ä¸Šä¸€åœºæ™¯ï¼‰"""
        pass

    def replace_scene(self, scene: SceneBase, data: Optional[Dict] = None) -> None:
        """æ›¿æ¢å½“å‰åœºæ™¯"""
        pass

    def update(self, delta_ms: float) -> None:
        """æ›´æ–°å½“å‰åœºæ™¯"""
        pass

    def draw(self, renderer: Renderer) -> None:
        """ç»˜åˆ¶å½“å‰åœºæ™¯"""
        pass
```

---

### 3.2 å¯åŠ¨åœºæ™¯ï¼ˆMainMenuSceneï¼‰

#### 3.2.1 åœºæ™¯å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                          â”‚
â”‚                    [èƒŒæ™¯å›¾ç‰‡]                             â”‚
â”‚                                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚              â”‚  æ¸¸æˆæ ‡é¢˜ LOGO    â”‚                       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚              â”‚   æ¸¸æˆä»‹ç»æ–‡å­—     â”‚                       â”‚
â”‚              â”‚  (è’¸æ±½æœ‹å…‹é£æ ¼)   â”‚                       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚              â”‚   ç©æ³•è¯´æ˜é¢æ¿     â”‚                       â”‚
â”‚              â”‚  - ç‚¹å‡»æ—‹è½¬å…ƒä»¶   â”‚                       â”‚
â”‚              â”‚  - è¿æ¥ç”µæºåˆ°ç»ˆç«¯ â”‚                       â”‚
â”‚              â”‚  - å®Œæˆç”µè·¯ä¿®å¤   â”‚                       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚              â”‚   é€‰æ‹©éš¾åº¦        â”‚                       â”‚
â”‚              â”‚  [ç®€å•][æ™®é€š]     â”‚                       â”‚
â”‚              â”‚  [å›°éš¾][åœ°ç‹±]     â”‚                       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚              â”‚  [å¼€å§‹æ¸¸æˆ]       â”‚                       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚              â”‚  [é€€å‡ºæ¸¸æˆ]       â”‚                       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                          â”‚
â”‚  BGM: ä¸»é¢˜éŸ³ä¹ï¼ˆéŸ³é‡20%ï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.2 UIå…ƒç´ æ¸…å•

| å…ƒç´  | ç±»å‹ | èµ„æºè·¯å¾„ | è¯´æ˜ |
|------|------|---------|------|
| èƒŒæ™¯å›¾ç‰‡ | Image | `assets/ui/backgrounds/main_menu_bg.png` | è’¸æ±½æœ‹å…‹é£æ ¼èƒŒæ™¯ |
| æ ‡é¢˜LOGO | Image | `assets/ui/logo/game_title.png` | æ¸¸æˆæ ‡é¢˜å›¾ç‰‡ |
| ä»‹ç»é¢æ¿ | Panel | - | åŠé€æ˜é¢æ¿ + æ–‡å­— |
| ç©æ³•é¢æ¿ | Panel | - | æ˜¾ç¤ºæ¸¸æˆè§„åˆ™ |
| éš¾åº¦æŒ‰é’® | Button | `assets/ui/buttons/difficulty_*.png` | 4ä¸ªéš¾åº¦é€‰æ‹©æŒ‰é’® |
| å¼€å§‹æŒ‰é’® | Button | `assets/ui/buttons/start_button_*.png` | 3çŠ¶æ€æŒ‰é’®ï¼ˆnormal/hover/pressedï¼‰|
| é€€å‡ºæŒ‰é’® | Button | `assets/ui/buttons/exit_button_*.png` | 3çŠ¶æ€æŒ‰é’® |
| BGM | Audio | `assets/audio/bgm/main_theme.ogg` | å¾ªç¯æ’­æ”¾ï¼ŒéŸ³é‡20% |

#### 3.2.3 äº¤äº’é€»è¾‘

**éš¾åº¦é€‰æ‹©**:
- é»˜è®¤é€‰ä¸­"æ™®é€š"
- ç‚¹å‡»å…¶ä»–éš¾åº¦ï¼Œé«˜äº®æ˜¾ç¤º
- å½“å‰é€‰ä¸­éš¾åº¦ä¿å­˜åˆ°æ¸¸æˆé…ç½®

**å¼€å§‹æ¸¸æˆ**:
1. è¯»å–å½“å‰è§£é”çš„å…³å¡è¿›åº¦
2. è¯»å–é€‰ä¸­çš„éš¾åº¦
3. æ·¡å‡ºBGMï¼ˆ500msï¼‰
4. åœºæ™¯è¿‡æ¸¡åŠ¨ç”»ï¼ˆæ·¡å‡ºï¼Œ300msï¼‰
5. åˆ‡æ¢åˆ°LoadingSceneï¼Œä¼ é€’å‚æ•°ï¼š`{difficulty: str, level_number: int}`

**é€€å‡ºæ¸¸æˆ**:
1. æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†ï¼š"ç¡®å®šè¦é€€å‡ºæ¸¸æˆå—ï¼Ÿ"
2. ç¡®è®¤åå…³é—­åº”ç”¨

#### 3.2.4 èµ„æºé…ç½®æ–‡ä»¶

**æ–‡ä»¶**: `data/config/main_menu_config.json`

```json
{
  "background": "assets/ui/backgrounds/main_menu_bg.png",
  "logo": {
    "image": "assets/ui/logo/game_title.png",
    "position": [400, 100],
    "scale": 1.0
  },
  "introduction": {
    "text": "æ¬¢è¿æ¥åˆ°ç”µè·¯ä¿®å¤æ¸¸æˆï¼\nåœ¨è’¸æ±½æœ‹å…‹çš„ä¸–ç•Œä¸­ä¿®å¤ç ´æŸçš„ç”µè·¯æ¿ã€‚",
    "position": [400, 200],
    "font_size": 20,
    "color": [200, 150, 100]
  },
  "instructions": {
    "text": "ç©æ³•è¯´æ˜ï¼š\n- ç‚¹å‡»é»‘è‰²ç“·ç –æ—‹è½¬ç”µè·¯å…ƒä»¶\n- è¿æ¥ç”µæºï¼ˆé“œè‰²ï¼‰åˆ°ç»ˆç«¯ï¼ˆé‡‘è‰²ï¼‰\n- å®Œæˆç”µè·¯è·¯å¾„å³å¯è¿‡å…³",
    "position": [400, 280],
    "font_size": 16,
    "color": [180, 180, 180]
  },
  "difficulty_buttons": {
    "easy": {"position": [300, 380], "label": "ç®€å•"},
    "normal": {"position": [400, 380], "label": "æ™®é€š"},
    "hard": {"position": [500, 380], "label": "å›°éš¾"},
    "hell": {"position": [600, 380], "label": "åœ°ç‹±"}
  },
  "start_button": {
    "position": [400, 480],
    "label": "å¼€å§‹æ¸¸æˆ"
  },
  "exit_button": {
    "position": [400, 540],
    "label": "é€€å‡ºæ¸¸æˆ"
  },
  "bgm": {
    "file": "assets/audio/bgm/main_theme.ogg",
    "volume": 0.2,
    "loop": true
  }
}
```

---

### 3.3 åŠ è½½åœºæ™¯ï¼ˆLoadingSceneï¼‰

#### 3.3.1 åœºæ™¯å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                          â”‚
â”‚                                                          â”‚
â”‚                   [èƒŒæ™¯å›¾ç‰‡]                              â”‚
â”‚              ï¼ˆéšæœºé€‰æ‹©çš„loadingèƒŒæ™¯ï¼‰                     â”‚
â”‚                                                          â”‚
â”‚                                                          â”‚
â”‚                                                          â”‚
â”‚                                                          â”‚
â”‚                                                          â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                â”‚  æ­£åœ¨åŠ è½½å…³å¡...      â”‚                 â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                          â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚                 â”‚
â”‚                â”‚      åŠ è½½ä¸­ 65%       â”‚                 â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                          â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3.2 åŠŸèƒ½è¯´æ˜

**åŠ è½½ä»»åŠ¡**:
1. ç”Ÿæˆå…³å¡æ•°æ®ï¼ˆä½¿ç”¨V3ç”Ÿæˆå™¨ï¼‰
2. åŠ è½½å…³å¡æ‰€éœ€çš„ç²¾çµèµ„æº
3. é¢„åŠ è½½éŸ³æ•ˆèµ„æº
4. åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€

**è¿›åº¦æ˜¾ç¤º**:
- å®æ—¶æ›´æ–°è¿›åº¦æ¡ï¼ˆ0-100%ï¼‰
- æ˜¾ç¤ºå½“å‰åŠ è½½é˜¶æ®µ
  - "ç”Ÿæˆå…³å¡..." (0-30%)
  - "åŠ è½½èµ„æº..." (30-80%)
  - "å‡†å¤‡æ¸¸æˆ..." (80-100%)

**è¿‡æ¸¡æ•ˆæœ**:
- è¿›å…¥ï¼šæ·¡å…¥æ•ˆæœï¼ˆ300msï¼‰
- é€€å‡ºï¼šæ·¡å‡ºæ•ˆæœï¼ˆ300msï¼‰
- åŠ è½½å®Œæˆåè‡ªåŠ¨åˆ‡æ¢åˆ°GameplayScene

#### 3.3.3 èµ„æºé…ç½®

**æ–‡ä»¶**: `data/config/loading_config.json`

```json
{
  "backgrounds": [
    "assets/ui/backgrounds/loading_bg_01.png",
    "assets/ui/backgrounds/loading_bg_02.png",
    "assets/ui/backgrounds/loading_bg_03.png"
  ],
  "loading_text": {
    "position": [400, 400],
    "font_size": 24,
    "color": [255, 255, 255]
  },
  "progress_bar": {
    "position": [300, 450],
    "size": [200, 30],
    "color_filled": [184, 115, 51],
    "color_empty": [80, 80, 80],
    "color_border": [120, 120, 120]
  },
  "stages": {
    "generating_level": {"progress": 30, "text": "ç”Ÿæˆå…³å¡..."},
    "loading_assets": {"progress": 80, "text": "åŠ è½½èµ„æº..."},
    "initializing": {"progress": 100, "text": "å‡†å¤‡æ¸¸æˆ..."}
  }
}
```

#### 3.3.4 å¼‚æ­¥åŠ è½½æœºåˆ¶

```python
class LoadingScene(SceneBase):
    """åŠ è½½åœºæ™¯"""

    def __init__(self, scene_manager: SceneManager):
        self._tasks = []
        self._current_progress = 0.0
        self._stage_text = ""

    def on_enter(self, data: Optional[Dict] = None) -> None:
        """è¿›å…¥åœºæ™¯æ—¶åˆå§‹åŒ–åŠ è½½ä»»åŠ¡"""
        difficulty = data.get('difficulty', 'normal')
        level_number = data.get('level_number', 1)

        # åˆ›å»ºåŠ è½½ä»»åŠ¡é˜Ÿåˆ—
        self._tasks = [
            (30, lambda: self._generate_level(difficulty, level_number)),
            (50, lambda: self._load_sprites()),
            (20, lambda: self._load_audio())
        ]

    def update(self, delta_ms: float) -> None:
        """æ›´æ–°åŠ è½½è¿›åº¦"""
        if self._tasks:
            weight, task = self._tasks[0]
            # æ‰§è¡Œä»»åŠ¡
            task()
            self._current_progress += weight
            self._tasks.pop(0)
        else:
            # æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼Œåˆ‡æ¢åˆ°æ¸¸æˆåœºæ™¯
            self._scene_manager.replace_scene(GameplayScene())
```

---

### 3.4 æ¸¸æˆåœºæ™¯ï¼ˆGameplaySceneï¼‰

#### 3.4.1 åœºæ™¯å¸ƒå±€ï¼ˆé‡æ–°è®¾è®¡ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å…³å¡ä¿¡æ¯]  å…³å¡ #5 (å›°éš¾)    [å€’è®¡æ—¶] â± 00:25        â”‚ â† HUDå±‚
â”‚  [ç§»åŠ¨æ¬¡æ•°]  ç§»åŠ¨: 12          [è°ƒè¯•å¼€å…³] â˜‘             â”‚
â”‚                                                 [é€€å‡º]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚                    [èƒŒæ™¯è£…é¥°å›¾]                          â”‚ â† èƒŒæ™¯å±‚
â”‚                ï¼ˆè’¸æ±½æœ‹å…‹å·¥ä½œå°ï¼‰                         â”‚
â”‚                                                          â”‚
â”‚         â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”                      â”‚
â”‚         â”‚ P â”‚   â”‚   â”‚   â”‚   â”‚ T â”‚                      â”‚ â† æ¸¸æˆå±‚
â”‚         â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤                      â”‚ ï¼ˆç°æœ‰é€»è¾‘ï¼‰
â”‚         â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚                      â”‚
â”‚         â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤                      â”‚
â”‚         â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚                      â”‚
â”‚         â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤                      â”‚
â”‚         â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚                      â”‚
â”‚         â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤                      â”‚
â”‚         â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚                      â”‚
â”‚         â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤                      â”‚
â”‚         â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚                      â”‚
â”‚         â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜                      â”‚
â”‚                                                          â”‚
â”‚  [è°ƒè¯•ä¿¡æ¯]                                              â”‚ â† è°ƒè¯•å±‚
â”‚  Current: 90Â°  Target: 0Â°/90Â°  (å½“å¼€å…³æ‰“å¼€æ—¶æ˜¾ç¤º)       â”‚  ï¼ˆå¯é€‰ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.4.2 å±‚çº§ç³»ç»Ÿ

**æ¸²æŸ“å±‚çº§ï¼ˆä»ä¸‹åˆ°ä¸Šï¼‰**:
1. **èƒŒæ™¯å±‚** (Z=0): é™æ€èƒŒæ™¯è£…é¥°å›¾
2. **æ¸¸æˆå±‚** (Z=10): ç½‘æ ¼ã€ç“·ç –ã€ç²’å­æ•ˆæœ
3. **HUDå±‚** (Z=20): å…³å¡ä¿¡æ¯ã€ç§»åŠ¨æ¬¡æ•°ã€é€€å‡ºæŒ‰é’®
4. **è°ƒè¯•å±‚** (Z=30): è°ƒè¯•ä¿¡æ¯ï¼ˆå¯å¼€å…³ï¼‰

**å®ç°æ–¹å¼**:
```python
class GameplayScene(SceneBase):
    """æ¸¸æˆåœºæ™¯"""

    def __init__(self):
        self._layers = {
            'background': BackgroundLayer(),
            'game': GameLayer(),  # å°è£…ç°æœ‰GameControlleré€»è¾‘
            'hud': HUDLayer(),
            'debug': DebugLayer()
        }
        self._debug_enabled = False  # è°ƒè¯•å¼€å…³

    def draw(self, renderer: Renderer) -> None:
        """æŒ‰å±‚çº§é¡ºåºç»˜åˆ¶"""
        self._layers['background'].draw(renderer)
        self._layers['game'].draw(renderer)
        self._layers['hud'].draw(renderer)
        if self._debug_enabled:
            self._layers['debug'].draw(renderer)
```

#### 3.4.3 æ–°å¢UIå…ƒç´ 

| å…ƒç´  | ç±»å‹ | ä½ç½® | åŠŸèƒ½ |
|------|------|------|------|
| èƒŒæ™¯è£…é¥°å›¾ | Image | å…¨å± | è’¸æ±½æœ‹å…‹å·¥ä½œå°èƒŒæ™¯ |
| å…³å¡ä¿¡æ¯é¢æ¿ | Label | å·¦ä¸Šè§’ | æ˜¾ç¤ºå…³å¡ç¼–å·å’Œéš¾åº¦ |
| ç§»åŠ¨æ¬¡æ•°é¢æ¿ | Label | å·¦ä¸Šè§’ | æ˜¾ç¤ºå½“å‰ç§»åŠ¨æ¬¡æ•° |
| å€’è®¡æ—¶é¢æ¿ | Label | å³ä¸Šè§’ | æ˜¾ç¤ºå‰©ä½™æ—¶é—´ï¼ˆMM:SSæ ¼å¼ï¼‰|
| é€€å‡ºæŒ‰é’® | Button | å³ä¸Šè§’ | é€€å‡ºå½“å‰å…³å¡ |
| è°ƒè¯•å¼€å…³ | Toggle | å³ä¸Šè§’ | å¼€å…³è°ƒè¯•ä¿¡æ¯æ˜¾ç¤º |
| è°ƒè¯•ä¿¡æ¯é¢æ¿ | Panel | å·¦ä¸‹è§’ | æ˜¾ç¤ºç“·ç –æ—‹è½¬ä¿¡æ¯ï¼ˆè°ƒè¯•ç”¨ï¼‰|

#### 3.4.4 èµ„æºé…ç½®

**æ–‡ä»¶**: `data/config/gameplay_config.json`

```json
{
  "background": {
    "image": "assets/ui/backgrounds/gameplay_bg.png",
    "parallax": false
  },
  "hud": {
    "level_info": {
      "position": [10, 10],
      "font_size": 24,
      "color": [255, 255, 255]
    },
    "move_count": {
      "position": [10, 40],
      "font_size": 20,
      "color": [200, 200, 200]
    },
    "timer": {
      "position": [650, 10],
      "font_size": 24,
      "color": [255, 255, 255],
      "warning_color": [255, 200, 0],
      "critical_color": [255, 50, 50],
      "warning_threshold": 10,
      "critical_threshold": 5
    },
    "exit_button": {
      "position": [750, 10],
      "size": [40, 40],
      "icon": "assets/ui/icons/exit_icon.png"
    },
    "debug_toggle": {
      "position": [700, 10],
      "size": [40, 40],
      "default": false
    }
  },
  "timer": {
    "enabled": true,
    "time_limits": {
      "easy": 60,
      "normal": 45,
      "hard": 30,
      "hell": 15
    }
  },
  "debug_panel": {
    "enabled": true,
    "position": [10, 550],
    "font_size": 14,
    "color": [255, 255, 0]
  }
}
```

#### 3.4.5 ä¸ç°æœ‰ä»£ç é›†æˆ

**æ–¹å¼1ï¼šç»§æ‰¿å°è£…**ï¼ˆæ¨èï¼‰
```python
class GameLayer:
    """æ¸¸æˆå±‚ï¼Œå°è£…ç°æœ‰GameControlleré€»è¾‘"""

    def __init__(self):
        self._game_controller = GameController()
        self._game_controller.initialize()

    def update(self, delta_ms: float) -> None:
        self._game_controller.update(delta_ms)

    def draw(self, renderer: Renderer) -> None:
        # ä½¿ç”¨ç°æœ‰çš„_draw_game()æ–¹æ³•
        self._game_controller._draw_game()

    def handle_event(self, event: pygame.event.Event) -> None:
        self._game_controller.handle_event(event)
```

---

### 3.5 ç»“ç®—åœºæ™¯ï¼ˆResultSceneï¼‰

#### 3.5.1 èƒœåˆ©ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                          â”‚
â”‚                   [èƒŒæ™¯å›¾ç‰‡]                              â”‚
â”‚                                                          â”‚
â”‚                                                          â”‚
â”‚               â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                     â”‚
â”‚               â•‘                   â•‘                     â”‚
â”‚               â•‘   ğŸ‰ èƒœ åˆ© ! ğŸ‰   â•‘                     â”‚
â”‚               â•‘                   â•‘                     â”‚
â”‚               â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                     â”‚
â”‚                                                          â”‚
â”‚            [ç¤¼èŠ±ç²’å­ç‰¹æ•ˆåŠ¨ç”»]                             â”‚
â”‚                                                          â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚               â”‚  å…³å¡ #5 å®Œæˆ!    â”‚                      â”‚
â”‚               â”‚  éš¾åº¦: å›°éš¾       â”‚                      â”‚
â”‚               â”‚  ç§»åŠ¨æ¬¡æ•°: 12     â”‚                      â”‚
â”‚               â”‚  â­â­â­          â”‚                      â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                          â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚               â”‚  [ä¸‹ä¸€å…³å¡]       â”‚                      â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚               â”‚  [è¿”å›ä¸»èœå•]     â”‚                      â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                          â”‚
â”‚  BGM: èƒœåˆ©éŸ³ä¹                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.5.2 å¤±è´¥ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                          â”‚
â”‚                   [èƒŒæ™¯å›¾ç‰‡]                              â”‚
â”‚                ï¼ˆç°è‰²è°ƒï¼Œä½é¥±å’Œåº¦ï¼‰                        â”‚
â”‚                                                          â”‚
â”‚               â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                     â”‚
â”‚               â•‘                   â•‘                     â”‚
â”‚               â•‘   ğŸ˜” å¤±è´¥...      â•‘                     â”‚
â”‚               â•‘                   â•‘                     â”‚
â”‚               â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                     â”‚
â”‚                                                          â”‚
â”‚            [å¤±æœ›çƒŸé›¾ç‰¹æ•ˆåŠ¨ç”»]                             â”‚
â”‚                                                          â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚               â”‚  å…³å¡ #5 æœªå®Œæˆ   â”‚                      â”‚
â”‚               â”‚  éš¾åº¦: å›°éš¾       â”‚                      â”‚
â”‚               â”‚  ç§»åŠ¨æ¬¡æ•°: 45     â”‚                      â”‚
â”‚               â”‚  ç»§ç»­åŠ æ²¹!        â”‚                      â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                          â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚               â”‚  [é‡è¯•ä¸€æ¬¡]       â”‚                      â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚               â”‚  [è¿”å›ä¸»èœå•]     â”‚                      â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.5.3 UIå…ƒç´ æ¸…å•

**èƒœåˆ©ç•Œé¢**:
| å…ƒç´  | ç±»å‹ | èµ„æºè·¯å¾„ | è¯´æ˜ |
|------|------|---------|------|
| èƒŒæ™¯å›¾ç‰‡ | Image | `assets/ui/backgrounds/victory_bg.png` | æ˜äº®çš„èƒŒæ™¯ |
| èƒœåˆ©æ ‡é¢˜ | Image | `assets/ui/titles/victory_title.png` | "èƒœåˆ©!"æ–‡å­— |
| ç¤¼èŠ±ç‰¹æ•ˆ | ParticleSystem | - | å½©è‰²ç²’å­çˆ†å‘ |
| ç»Ÿè®¡é¢æ¿ | Panel | - | æ˜¾ç¤ºå…³å¡ã€éš¾åº¦ã€ç§»åŠ¨æ¬¡æ•°ã€æ˜Ÿçº§ |
| ä¸‹ä¸€å…³æŒ‰é’® | Button | `assets/ui/buttons/next_level_*.png` | è¿›å…¥ä¸‹ä¸€å…³ |
| è¿”å›æŒ‰é’® | Button | `assets/ui/buttons/back_menu_*.png` | è¿”å›ä¸»èœå• |
| èƒœåˆ©éŸ³æ•ˆ | Audio | `assets/audio/sfx/victory.wav` | å·²å­˜åœ¨ |

**å¤±è´¥ç•Œé¢**:
| å…ƒç´  | ç±»å‹ | èµ„æºè·¯å¾„ | è¯´æ˜ |
|------|------|---------|------|
| èƒŒæ™¯å›¾ç‰‡ | Image | `assets/ui/backgrounds/defeat_bg.png` | ç°æš—çš„èƒŒæ™¯ |
| å¤±è´¥æ ‡é¢˜ | Image | `assets/ui/titles/defeat_title.png` | "å¤±è´¥..."æ–‡å­— |
| çƒŸé›¾ç‰¹æ•ˆ | ParticleSystem | - | ç°è‰²çƒŸé›¾æ•ˆæœ |
| ç»Ÿè®¡é¢æ¿ | Panel | - | æ˜¾ç¤ºå…³å¡ã€éš¾åº¦ã€ç§»åŠ¨æ¬¡æ•°ã€å¤±è´¥åŸå›  |
| é‡è¯•æŒ‰é’® | Button | `assets/ui/buttons/retry_*.png` | é‡æ–°å¼€å§‹å…³å¡ |
| è¿”å›æŒ‰é’® | Button | `assets/ui/buttons/back_menu_*.png` | è¿”å›ä¸»èœå• |
| å¤±è´¥éŸ³æ•ˆ | Audio | `assets/audio/sfx/defeat.wav` | æ–°å¢ |

**å¤±è´¥åŸå› æ˜¾ç¤º**:
- è¶…æ—¶å¤±è´¥: "æ—¶é—´è€—å°½ï¼"
- å…¶ä»–å¤±è´¥: "æœªå®Œæˆå…³å¡"ï¼ˆé¢„ç•™ï¼‰

#### 3.5.4 å¤±è´¥æ¡ä»¶

**è§¦å‘æ¡ä»¶**: å€’è®¡æ—¶å½’é›¶æ—¶ï¼Œå…³å¡æœªå®Œæˆ

**å¤±è´¥å¤„ç†æµç¨‹**:
1. åœæ­¢æ¸¸æˆè®¡æ—¶å™¨
2. æ’­æ”¾å¤±è´¥éŸ³æ•ˆ
3. æ˜¾ç¤ºå¤±è´¥ç‰¹æ•ˆï¼ˆçƒŸé›¾ï¼‰
4. åˆ‡æ¢åˆ°ResultSceneï¼ˆå¤±è´¥æ¨¡å¼ï¼‰
5. æ˜¾ç¤ºå¤±è´¥åŸå› ï¼š"æ—¶é—´è€—å°½ï¼"

**å®ç°**:
```python
def update(self, delta_ms: float) -> None:
    """æ›´æ–°æ¸¸æˆé€»è¾‘"""
    # æ›´æ–°å€’è®¡æ—¶
    self._timer.update(delta_ms)

    # æ£€æŸ¥è¶…æ—¶
    if self._timer.is_timeout() and not self._level_completed:
        self._on_level_failed("æ—¶é—´è€—å°½ï¼")

def _on_level_failed(self, reason: str) -> None:
    """å¤„ç†å…³å¡å¤±è´¥"""
    self._logger.info(f"Level failed: {reason}")
    self._sound_player.play_sound("sfx/defeat.wav")

    # åˆ‡æ¢åˆ°å¤±è´¥åœºæ™¯
    self._scene_manager.replace_scene(
        ResultScene(success=False, reason=reason)
    )
```

**è¯„åˆ†æ ‡å‡†**:
- â­â­â­ (ä¸‰æ˜Ÿ): ç§»åŠ¨æ¬¡æ•° â‰¤ æœ€ä¼˜è§£ Ã— 1.5
- â­â­ (äºŒæ˜Ÿ): ç§»åŠ¨æ¬¡æ•° â‰¤ æœ€ä¼˜è§£ Ã— 2.0
- â­ (ä¸€æ˜Ÿ): å®Œæˆå…³å¡

**å®ç°**:
```python
def calculate_stars(move_count: int, optimal_moves: int) -> int:
    """è®¡ç®—æ˜Ÿçº§"""
    if move_count <= optimal_moves * 1.5:
        return 3
    elif move_count <= optimal_moves * 2.0:
        return 2
    else:
        return 1
```

#### 3.5.5 å¤±è´¥æ¡ä»¶

**éœ€æ±‚**: æ·»åŠ å€’è®¡æ—¶æœºåˆ¶ï¼Œå¢åŠ æ¸¸æˆæŒ‘æˆ˜æ€§å’Œç´§è¿«æ„Ÿ

**å€’è®¡æ—¶è§„åˆ™**:
- **ç®€å•æ¨¡å¼**: 60ç§’å†…å®Œæˆå…³å¡
- **æ™®é€šæ¨¡å¼**: 45ç§’å†…å®Œæˆå…³å¡
- **å›°éš¾æ¨¡å¼**: 30ç§’å†…å®Œæˆå…³å¡
- **åœ°ç‹±æ¨¡å¼**: 15ç§’å†…å®Œæˆå…³å¡

**å¤±è´¥è§¦å‘**:
- å€’è®¡æ—¶å½’é›¶æ—¶ï¼Œå¦‚æœå…³å¡æœªå®Œæˆï¼Œåˆ™åˆ¤å®šä¸ºå¤±è´¥
- æ˜¾ç¤ºå¤±è´¥åœºæ™¯ï¼Œæä¾›é‡è¯•é€‰é¡¹

**å®ç°æ–¹å¼**:
```python
class GameTimer:
    """æ¸¸æˆå€’è®¡æ—¶å™¨"""

    # éš¾åº¦å¯¹åº”çš„æ—¶é—´é™åˆ¶ï¼ˆç§’ï¼‰
    TIME_LIMITS = {
        'easy': 60,
        'normal': 45,
        'hard': 30,
        'hell': 15
    }

    def __init__(self, difficulty: str):
        self._time_limit = self.TIME_LIMITS.get(difficulty, 45)
        self._remaining_time = self._time_limit
        self._is_running = False

    def start(self) -> None:
        """å¼€å§‹è®¡æ—¶"""
        self._is_running = True
        self._remaining_time = self._time_limit

    def update(self, delta_ms: float) -> None:
        """æ›´æ–°å€’è®¡æ—¶"""
        if self._is_running:
            self._remaining_time -= delta_ms / 1000.0
            if self._remaining_time <= 0:
                self._remaining_time = 0
                self._is_running = False

    def is_timeout(self) -> bool:
        """æ˜¯å¦è¶…æ—¶"""
        return self._remaining_time <= 0

    def get_remaining_time(self) -> float:
        """è·å–å‰©ä½™æ—¶é—´ï¼ˆç§’ï¼‰"""
        return max(0, self._remaining_time)

    def get_formatted_time(self) -> str:
        """è·å–æ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸² (MM:SS)"""
        minutes = int(self._remaining_time) // 60
        seconds = int(self._remaining_time) % 60
        return f"{minutes:02d}:{seconds:02d}"
```

**UIæ˜¾ç¤º**:
- åœ¨HUDå±‚æ˜¾ç¤ºå€’è®¡æ—¶
- å‰©ä½™æ—¶é—´ < 10ç§’æ—¶ï¼Œæ–‡å­—å˜çº¢å¹¶é—ªçƒ
- å‰©ä½™æ—¶é—´ < 5ç§’æ—¶ï¼Œæ’­æ”¾ç´§å¼ éŸ³æ•ˆ

**é…ç½®å‚æ•°**:
```json
{
  "timer": {
    "enabled": true,
    "time_limits": {
      "easy": 60,
      "normal": 45,
      "hard": 30,
      "hell": 15
    },
    "warning_threshold": 10,
    "critical_threshold": 5,
    "warning_color": [255, 200, 0],
    "critical_color": [255, 50, 50]
  }
}
```

#### 3.5.6 æ˜Ÿçº§è¯„åˆ†ç³»ç»Ÿ

**è¯„åˆ†æ ‡å‡†**:
- â­â­â­ (ä¸‰æ˜Ÿ): ç§»åŠ¨æ¬¡æ•° â‰¤ æœ€ä¼˜è§£ Ã— 1.5
- â­â­ (äºŒæ˜Ÿ): ç§»åŠ¨æ¬¡æ•° â‰¤ æœ€ä¼˜è§£ Ã— 2.0
- â­ (ä¸€æ˜Ÿ): å®Œæˆå…³å¡

**å®ç°**:
```python
def calculate_stars(move_count: int, optimal_moves: int) -> int:
    """è®¡ç®—æ˜Ÿçº§"""
    if move_count <= optimal_moves * 1.5:
        return 3
    elif move_count <= optimal_moves * 2.0:
        return 2
    else:
        return 1
```

#### 3.5.7 èµ„æºé…ç½®

**æ–‡ä»¶**: `data/config/result_config.json`

```json
{
  "victory": {
    "background": "assets/ui/backgrounds/victory_bg.png",
    "title": "assets/ui/titles/victory_title.png",
    "particle_effect": {
      "type": "fireworks",
      "count": 50,
      "colors": [[255, 215, 0], [255, 105, 180], [0, 255, 255]],
      "duration": 3000
    },
    "stats_panel": {
      "position": [400, 350],
      "font_size": 20,
      "color": [255, 255, 255]
    },
    "next_button": {
      "position": [400, 480],
      "label": "ä¸‹ä¸€å…³å¡"
    },
    "menu_button": {
      "position": [400, 540],
      "label": "è¿”å›ä¸»èœå•"
    },
    "audio": {
      "sfx": "assets/audio/sfx/victory.wav",
      "volume": 0.8
    }
  },
  "defeat": {
    "background": "assets/ui/backgrounds/defeat_bg.png",
    "title": "assets/ui/titles/defeat_title.png",
    "particle_effect": {
      "type": "smoke",
      "count": 30,
      "color": [100, 100, 100],
      "duration": 2000
    },
    "stats_panel": {
      "position": [400, 350],
      "font_size": 20,
      "color": [200, 200, 200]
    },
    "retry_button": {
      "position": [400, 480],
      "label": "é‡è¯•ä¸€æ¬¡"
    },
    "menu_button": {
      "position": [400, 540],
      "label": "è¿”å›ä¸»èœå•"
    },
    "audio": {
      "sfx": "assets/audio/sfx/defeat.wav",
      "volume": 0.6
    }
  }
}
```

---

### 3.6 å…³å¡è¿›åº¦ç³»ç»Ÿ

#### 3.6.1 ç³»ç»Ÿè®¾è®¡

**æ ¸å¿ƒåŠŸèƒ½**:
1. **å…³å¡è§£é”**: å®Œæˆå½“å‰å…³å¡è§£é”ä¸‹ä¸€å…³
2. **è¿›åº¦ä¿å­˜**: æœ¬åœ°ä¿å­˜ç©å®¶è¿›åº¦
3. **æ˜Ÿçº§è®°å½•**: è®°å½•æ¯ä¸ªå…³å¡çš„æœ€ä½³æˆç»©
4. **éš¾åº¦ç‹¬ç«‹**: ä¸åŒéš¾åº¦çš„è¿›åº¦ç‹¬ç«‹ç®¡ç†

**æ•°æ®ç»“æ„**:
```python
@dataclass
class LevelProgress:
    """å…³å¡è¿›åº¦æ•°æ®"""
    level_number: int
    difficulty: str
    is_unlocked: bool
    is_completed: bool
    best_moves: Optional[int]
    stars: int  # 0-3
    completed_at: Optional[datetime]

@dataclass
class GameProgress:
    """æ¸¸æˆæ€»è¿›åº¦"""
    levels: Dict[str, Dict[int, LevelProgress]]  # {difficulty: {level_number: progress}}
    current_difficulty: str
    current_level: int
```

#### 3.6.2 å­˜æ¡£æ–‡ä»¶æ ¼å¼

**æ–‡ä»¶**: `data/saves/player_progress.json`

```json
{
  "version": "1.0",
  "last_played": "2026-01-23T14:30:00",
  "current_difficulty": "normal",
  "current_level": 5,
  "progress": {
    "easy": {
      "1": {"unlocked": true, "completed": true, "stars": 3, "best_moves": 8},
      "2": {"unlocked": true, "completed": true, "stars": 2, "best_moves": 12}
    },
    "normal": {
      "1": {"unlocked": true, "completed": true, "stars": 3, "best_moves": 10},
      "2": {"unlocked": true, "completed": true, "stars": 2, "best_moves": 15},
      "3": {"unlocked": true, "completed": true, "stars": 1, "best_moves": 20},
      "4": {"unlocked": true, "completed": true, "stars": 2, "best_moves": 18},
      "5": {"unlocked": true, "completed": false, "stars": 0, "best_moves": null}
    },
    "hard": {
      "1": {"unlocked": true, "completed": false, "stars": 0, "best_moves": null}
    },
    "hell": {
      "1": {"unlocked": true, "completed": false, "stars": 0, "best_moves": null}
    }
  }
}
```

#### 3.6.3 è¿›åº¦ç®¡ç†å™¨

**æ–‡ä»¶**: `src/progression/save_manager.py`

```python
class SaveManager:
    """å­˜æ¡£ç®¡ç†å™¨"""

    def __init__(self, save_file: str = "data/saves/player_progress.json"):
        self._save_file = save_file
        self._progress: GameProgress = None

    def load_progress(self) -> GameProgress:
        """åŠ è½½è¿›åº¦"""
        pass

    def save_progress(self, progress: GameProgress) -> bool:
        """ä¿å­˜è¿›åº¦"""
        pass

    def unlock_level(self, difficulty: str, level_number: int) -> None:
        """è§£é”å…³å¡"""
        pass

    def complete_level(
        self,
        difficulty: str,
        level_number: int,
        move_count: int,
        stars: int
    ) -> None:
        """å®Œæˆå…³å¡"""
        pass

    def get_unlocked_levels(self, difficulty: str) -> List[int]:
        """è·å–å·²è§£é”çš„å…³å¡åˆ—è¡¨"""
        pass

    def reset_progress(self) -> None:
        """é‡ç½®è¿›åº¦ï¼ˆç”¨äºæµ‹è¯•ï¼‰"""
        pass
```

#### 3.6.4 è§£é”é€»è¾‘

**è§„åˆ™**:
1. æ¯ä¸ªéš¾åº¦çš„ç¬¬1å…³é»˜è®¤è§£é”
2. å®Œæˆç¬¬Nå…³åï¼Œè§£é”ç¬¬N+1å…³
3. ä¸åŒéš¾åº¦çš„è¿›åº¦ç‹¬ç«‹
4. å®Œæˆæ‰€æœ‰å…³å¡åï¼Œæç¤º"å…¨éƒ¨é€šå…³"

**å®ç°**:
```python
def on_level_complete(
    self,
    difficulty: str,
    level_number: int,
    move_count: int
) -> None:
    """å¤„ç†å…³å¡å®Œæˆ"""
    # è®¡ç®—æ˜Ÿçº§
    stars = calculate_stars(move_count, optimal_moves)

    # ä¿å­˜è¿›åº¦
    save_manager.complete_level(difficulty, level_number, move_count, stars)

    # è§£é”ä¸‹ä¸€å…³
    if not is_final_level(difficulty, level_number):
        save_manager.unlock_level(difficulty, level_number + 1)
    else:
        # å…¨éƒ¨é€šå…³
        show_completion_message()
```

#### 3.6.5 å…³å¡é…ç½®ç³»ç»Ÿ

**é—®é¢˜**: å½“å‰ä½¿ç”¨V3ç”Ÿæˆå™¨åŠ¨æ€ç”Ÿæˆå…³å¡ï¼Œæ²¡æœ‰å›ºå®šé…ç½®

**æ–¹æ¡ˆ**:
- **æ··åˆæ¨¡å¼**: æ—¢æ”¯æŒé…ç½®å…³å¡ï¼Œä¹Ÿæ”¯æŒåŠ¨æ€ç”Ÿæˆ
  - å¦‚æœå­˜åœ¨é…ç½®æ–‡ä»¶ï¼ˆ`data/levels/level_XXX_éš¾åº¦.json`ï¼‰ï¼ŒåŠ è½½é…ç½®
  - å¦‚æœä¸å­˜åœ¨ï¼Œä½¿ç”¨V3ç”Ÿæˆå™¨åŠ¨æ€ç”Ÿæˆ

**é…ç½®æ–‡ä»¶å‘½å**:
```
data/levels/
â”œâ”€â”€ level_001_easy.json      # ç¬¬1å…³-ç®€å•
â”œâ”€â”€ level_001_normal.json    # ç¬¬1å…³-æ™®é€š
â”œâ”€â”€ level_001_hard.json      # ç¬¬1å…³-å›°éš¾
â”œâ”€â”€ level_001_hell.json      # ç¬¬1å…³-åœ°ç‹±
â”œâ”€â”€ level_002_easy.json
...
```

**å…³å¡åŠ è½½é€»è¾‘**:
```python
def load_level(difficulty: str, level_number: int) -> LevelData:
    """åŠ è½½å…³å¡"""
    # å°è¯•åŠ è½½é…ç½®æ–‡ä»¶
    config_file = f"data/levels/level_{level_number:03d}_{difficulty}.json"
    if os.path.exists(config_file):
        return level_loader.load_level(config_file)
    else:
        # åŠ¨æ€ç”Ÿæˆ
        return level_generator.generate_level(difficulty, level_number)
```

---

### 3.7 æ‰“åŒ…å‘å¸ƒç³»ç»Ÿ

#### 3.7.1 æ„å»ºç›®æ ‡

**å‘å¸ƒåŒ…ç»“æ„**:
```
CircuitRepairGame/
â”œâ”€â”€ CircuitRepairGame.exe     # ä¸»ç¨‹åºï¼ˆWindowsï¼‰
â”œâ”€â”€ assets/                    # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ sprites/
â”‚   â”œâ”€â”€ audio/
â”‚   â””â”€â”€ fonts/
â”œâ”€â”€ data/                      # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ levels/
â”‚   â””â”€â”€ saves/
â”œâ”€â”€ README.txt                 # ç”¨æˆ·æ‰‹å†Œ
â”œâ”€â”€ LICENSE.txt                # è®¸å¯è¯
â””â”€â”€ CHANGELOG.txt              # æ›´æ–°æ—¥å¿—
```

#### 3.7.2 æ‰“åŒ…å·¥å…·é€‰æ‹©

**æ¨è**: PyInstaller

**ç†ç”±**:
- æ”¯æŒPygameé¡¹ç›®
- å¯æ‰“åŒ…ä¸ºå•ä¸€å¯æ‰§è¡Œæ–‡ä»¶
- è·¨å¹³å°æ”¯æŒ
- ç¤¾åŒºæ´»è·ƒ

**æ›¿ä»£æ–¹æ¡ˆ**:
- cx_Freeze
- Nuitka
- py2exeï¼ˆä»…Windowsï¼‰

#### 3.7.3 æ„å»ºè„šæœ¬

**æ–‡ä»¶**: `tools/build/build.py`

```python
"""
æ„å»ºè„šæœ¬

åŠŸèƒ½ï¼š
- æ¸…ç†æ—§æ„å»º
- è¿è¡ŒPyInstaller
- å¤åˆ¶èµ„æºæ–‡ä»¶
- ç”Ÿæˆå‘å¸ƒåŒ…
"""

import os
import shutil
import subprocess
from pathlib import Path

def clean_build():
    """æ¸…ç†æ—§æ„å»º"""
    dirs_to_clean = ['build', 'dist', '__pycache__']
    for dir_name in dirs_to_clean:
        if os.path.exists(dir_name):
            shutil.rmtree(dir_name)
    print("âœ“ æ¸…ç†å®Œæˆ")

def run_pyinstaller():
    """è¿è¡ŒPyInstaller"""
    cmd = [
        'pyinstaller',
        '--name=CircuitRepairGame',
        '--onefile',  # æ‰“åŒ…ä¸ºå•ä¸€æ–‡ä»¶
        '--windowed',  # æ— æ§åˆ¶å°çª—å£
        '--icon=assets/ui/icon/game_icon.ico',
        '--add-data=assets;assets',
        '--add-data=data;data',
        'main.py'
    ]
    subprocess.run(cmd, check=True)
    print("âœ“ PyInstalleræ„å»ºå®Œæˆ")

def copy_resources():
    """å¤åˆ¶å¿…è¦èµ„æº"""
    # å¤åˆ¶READMEç­‰æ–‡ä»¶åˆ°distç›®å½•
    files_to_copy = [
        'README.md',
        'LICENSE',
        'CHANGELOG.md'
    ]
    for file in files_to_copy:
        if os.path.exists(file):
            shutil.copy(file, 'dist/')
    print("âœ“ èµ„æºå¤åˆ¶å®Œæˆ")

def create_zip():
    """åˆ›å»ºå‘å¸ƒå‹ç¼©åŒ…"""
    shutil.make_archive(
        'CircuitRepairGame_v1.0.0',
        'zip',
        'dist'
    )
    print("âœ“ å‘å¸ƒåŒ…åˆ›å»ºå®Œæˆ: CircuitRepairGame_v1.0.0.zip")

if __name__ == '__main__':
    print("å¼€å§‹æ„å»º...")
    clean_build()
    run_pyinstaller()
    copy_resources()
    create_zip()
    print("\nâœ“ æ„å»ºå®Œæˆ!")
```

#### 3.7.4 PyInstalleré…ç½®æ–‡ä»¶

**æ–‡ä»¶**: `circuit_repair_game.spec`

```python
# -*- mode: python ; coding: utf-8 -*-

block_cipher = None

a = Analysis(
    ['main.py'],
    pathex=[],
    binaries=[],
    datas=[
        ('assets', 'assets'),
        ('data', 'data'),
    ],
    hiddenimports=[
        'pygame',
        'numpy',
    ],
    hookspath=[],
    hooksconfig={},
    runtime_hooks=[],
    excludes=[],
    win_no_prefer_redirects=False,
    win_private_assemblies=False,
    cipher=block_cipher,
    noarchive=False,
)

pyz = PYZ(a.pure, a.zipped_data, cipher=block_cipher)

exe = EXE(
    pyz,
    a.scripts,
    a.binaries,
    a.zipfiles,
    a.datas,
    [],
    name='CircuitRepairGame',
    debug=False,
    bootloader_ignore_signals=False,
    strip=False,
    upx=True,
    upx_exclude=[],
    runtime_tmpdir=None,
    console=False,
    disable_windowed_traceback=False,
    argv_emulation=False,
    target_arch=None,
    codesign_identity=None,
    entitlements_file=None,
    icon='assets/ui/icon/game_icon.ico'
)
```

#### 3.7.5 CI/CDé…ç½®

**æ–‡ä»¶**: `.github/workflows/build.yml`ï¼ˆå¦‚æœä½¿ç”¨GitHub Actionsï¼‰

```yaml
name: Build Release

on:
  push:
    tags:
      - 'v*'

jobs:
  build-windows:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v2

      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install -r requirements.txt
          pip install pyinstaller

      - name: Build executable
        run: python tools/build/build.py

      - name: Upload artifact
        uses: actions/upload-artifact@v2
        with:
          name: CircuitRepairGame-Windows
          path: CircuitRepairGame_*.zip
```

#### 3.7.6 é…ç½®æ–‡ä»¶æ‰“åŒ…

**é—®é¢˜**: åŒºåˆ†å¼€å‘é…ç½®å’Œå‘å¸ƒé…ç½®

**æ–¹æ¡ˆ**:
```
data/config/
â”œâ”€â”€ development/          # å¼€å‘é…ç½®ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰
â”‚   â”œâ”€â”€ game_config.json
â”‚   â””â”€â”€ logging_config.json
â””â”€â”€ production/           # å‘å¸ƒé…ç½®ï¼ˆä¼˜åŒ–æ¨¡å¼ï¼‰
    â”œâ”€â”€ game_config.json
    â””â”€â”€ logging_config.json
```

**æ„å»ºè„šæœ¬è‡ªåŠ¨é€‰æ‹©**:
```python
import os

# ç¯å¢ƒå˜é‡æ§åˆ¶
ENV = os.getenv('BUILD_ENV', 'development')

if ENV == 'production':
    config_dir = 'data/config/production'
else:
    config_dir = 'data/config/development'
```

---

## 4. æŠ€æœ¯ç»†èŠ‚

### 4.1 UIç»„ä»¶åº“

#### 4.1.1 åŸºç¡€ç»„ä»¶

**Buttonï¼ˆæŒ‰é’®ï¼‰**:
```python
class Button(UIComponent):
    """æŒ‰é’®ç»„ä»¶"""

    def __init__(
        self,
        x: int,
        y: int,
        width: int,
        height: int,
        label: str,
        on_click: Callable = None,
        sprites: Dict[str, str] = None  # {'normal': path, 'hover': path, 'pressed': path}
    ):
        pass

    def set_state(self, state: str) -> None:
        """è®¾ç½®æŒ‰é’®çŠ¶æ€ï¼šnormal/hover/pressed/disabled"""
        pass
```

**Panelï¼ˆé¢æ¿ï¼‰**:
```python
class Panel(UIComponent):
    """é¢æ¿ç»„ä»¶"""

    def __init__(
        self,
        x: int,
        y: int,
        width: int,
        height: int,
        background: Optional[str] = None,
        border: Optional[Tuple[int, int, int]] = None
    ):
        pass
```

**Labelï¼ˆæ ‡ç­¾ï¼‰**:
```python
class Label(UIComponent):
    """æ–‡æœ¬æ ‡ç­¾"""

    def __init__(
        self,
        x: int,
        y: int,
        text: str,
        font_size: int = 20,
        color: Tuple[int, int, int] = (255, 255, 255),
        alignment: str = 'left'  # left/center/right
    ):
        pass
```

**ProgressBarï¼ˆè¿›åº¦æ¡ï¼‰**:
```python
class ProgressBar(UIComponent):
    """è¿›åº¦æ¡ç»„ä»¶"""

    def __init__(
        self,
        x: int,
        y: int,
        width: int,
        height: int,
        min_value: float = 0.0,
        max_value: float = 100.0
    ):
        pass

    def set_value(self, value: float) -> None:
        """è®¾ç½®å½“å‰è¿›åº¦"""
        pass
```

#### 4.1.2 å¸ƒå±€ç®¡ç†

**Layout Manager**:
```python
class LayoutManager:
    """å¸ƒå±€ç®¡ç†å™¨"""

    @staticmethod
    def center(component: UIComponent, container_width: int, container_height: int) -> None:
        """å±…ä¸­å¯¹é½"""
        component.x = (container_width - component.width) // 2
        component.y = (container_height - component.height) // 2

    @staticmethod
    def align_vertical(components: List[UIComponent], spacing: int, start_y: int) -> None:
        """å‚ç›´æ’åˆ—"""
        y = start_y
        for comp in components:
            comp.y = y
            y += comp.height + spacing
```

### 4.2 èµ„æºç®¡ç†ä¼˜åŒ–

#### 4.2.1 èµ„æºé¢„åŠ è½½

```python
class ResourcePreloader:
    """èµ„æºé¢„åŠ è½½å™¨"""

    def __init__(self):
        self._load_queue: List[Tuple[str, str]] = []  # [(type, path)]
        self._loaded: Dict[str, Any] = {}

    def add_to_queue(self, resource_type: str, path: str) -> None:
        """æ·»åŠ åˆ°åŠ è½½é˜Ÿåˆ—"""
        self._load_queue.append((resource_type, path))

    def load_all(self, progress_callback: Callable = None) -> None:
        """åŠ è½½æ‰€æœ‰èµ„æº"""
        total = len(self._load_queue)
        for i, (res_type, path) in enumerate(self._load_queue):
            # åŠ è½½èµ„æº
            if res_type == 'image':
                resource = pygame.image.load(path)
            elif res_type == 'audio':
                resource = pygame.mixer.Sound(path)

            self._loaded[path] = resource

            # å›è°ƒè¿›åº¦
            if progress_callback:
                progress_callback((i + 1) / total * 100)
```

#### 4.2.2 èµ„æºé…ç½®ç»Ÿä¸€ç®¡ç†

**æ–‡ä»¶**: `data/config/resources.json`

```json
{
  "version": "1.0",
  "theme": "steampunk",
  "ui": {
    "backgrounds": {
      "main_menu": "assets/ui/backgrounds/main_menu_bg.png",
      "loading": "assets/ui/backgrounds/loading_bg_01.png",
      "gameplay": "assets/ui/backgrounds/gameplay_bg.png",
      "victory": "assets/ui/backgrounds/victory_bg.png",
      "defeat": "assets/ui/backgrounds/defeat_bg.png"
    },
    "buttons": {
      "start": {
        "normal": "assets/ui/buttons/start_button_normal.png",
        "hover": "assets/ui/buttons/start_button_hover.png",
        "pressed": "assets/ui/buttons/start_button_pressed.png"
      },
      "exit": {
        "normal": "assets/ui/buttons/exit_button_normal.png",
        "hover": "assets/ui/buttons/exit_button_hover.png",
        "pressed": "assets/ui/buttons/exit_button_pressed.png"
      }
    }
  },
  "audio": {
    "bgm": {
      "main_theme": "assets/audio/bgm/main_theme.ogg",
      "gameplay_theme": "assets/audio/bgm/gameplay_theme.ogg"
    },
    "sfx": {
      "button_click": "assets/audio/sfx/button_click.wav",
      "tile_rotate": "assets/audio/sfx/tile_rotate.wav",
      "victory": "assets/audio/sfx/victory.wav",
      "defeat": "assets/audio/sfx/defeat.wav"
    }
  }
}
```

### 4.3 å ä½ç¬¦èµ„æºè§„èŒƒ

#### 4.3.1 å ä½ç¬¦åˆ—è¡¨

**UIèƒŒæ™¯å›¾**:
- ä¸»èœå•èƒŒæ™¯: 800Ã—600, è’¸æ±½æœ‹å…‹é£æ ¼æ’ç”»ï¼ˆå ä½ç¬¦ï¼šæ·±æ£•è‰²æ¸å˜ï¼‰
- åŠ è½½èƒŒæ™¯: 800Ã—600, 3å¼ ä¸åŒåœºæ™¯ï¼ˆå ä½ç¬¦ï¼šä¸åŒè‰²è°ƒçš„çº¯è‰²ï¼‰
- æ¸¸æˆèƒŒæ™¯: 800Ã—600, å·¥ä½œå°è£…é¥°ï¼ˆå ä½ç¬¦ï¼šæ·±ç°è‰²+ç®€å•ç½‘æ ¼ï¼‰
- èƒœåˆ©èƒŒæ™¯: 800Ã—600, æ˜äº®æ°›å›´ï¼ˆå ä½ç¬¦ï¼šé‡‘è‰²æ¸å˜ï¼‰
- å¤±è´¥èƒŒæ™¯: 800Ã—600, æš—æ·¡æ°›å›´ï¼ˆå ä½ç¬¦ï¼šç°è‰²æ¸å˜ï¼‰

**UIæŒ‰é’®**:
- æ‰€æœ‰æŒ‰é’®: 3çŠ¶æ€å›¾ç‰‡ï¼ˆnormal/hover/pressedï¼‰
- å ä½ç¬¦: çº¯è‰²çŸ©å½¢ + è¾¹æ¡† + æ–‡å­—

**éŸ³é¢‘**:
- BGM: å¾ªç¯æ’­æ”¾çš„èƒŒæ™¯éŸ³ä¹ï¼ˆå ä½ç¬¦ï¼šæ— å£°æˆ–ç®€å•æ—‹å¾‹ï¼‰
- SFX: å„ç§éŸ³æ•ˆï¼ˆå ä½ç¬¦ï¼šä½¿ç”¨Pygameç”Ÿæˆçš„åŸºç¡€éŸ³æ•ˆï¼‰

#### 4.3.2 å ä½ç¬¦ç”Ÿæˆå·¥å…·

**æ–‡ä»¶**: `tools/scripts/generate_placeholders.py`

```python
"""
å ä½ç¬¦èµ„æºç”Ÿæˆå·¥å…·

ç”¨äºå¿«é€Ÿç”Ÿæˆä¸´æ—¶çš„UIèµ„æºï¼Œä¾¿äºå¼€å‘å’Œæµ‹è¯•
"""

import pygame
from pathlib import Path

def generate_button_placeholder(
    width: int,
    height: int,
    label: str,
    output_dir: Path
) -> None:
    """ç”ŸæˆæŒ‰é’®å ä½ç¬¦"""
    states = {
        'normal': (100, 100, 100),
        'hover': (150, 150, 150),
        'pressed': (80, 80, 80)
    }

    for state, color in states.items():
        surface = pygame.Surface((width, height))
        surface.fill(color)

        # ç»˜åˆ¶è¾¹æ¡†
        pygame.draw.rect(surface, (200, 200, 200), (0, 0, width, height), 2)

        # ç»˜åˆ¶æ–‡å­—
        font = pygame.font.Font(None, 24)
        text = font.render(label, True, (255, 255, 255))
        text_rect = text.get_rect(center=(width//2, height//2))
        surface.blit(text, text_rect)

        # ä¿å­˜
        filename = f"{label.lower().replace(' ', '_')}_{state}.png"
        pygame.image.save(surface, output_dir / filename)

def generate_background_placeholder(
    width: int,
    height: int,
    colors: List[Tuple[int, int, int]],
    output_path: Path
) -> None:
    """ç”ŸæˆèƒŒæ™¯æ¸å˜å ä½ç¬¦"""
    surface = pygame.Surface((width, height))

    # ç®€å•æ¸å˜
    for y in range(height):
        ratio = y / height
        color = tuple(int(c1 + (c2 - c1) * ratio) for c1, c2 in zip(colors[0], colors[1]))
        pygame.draw.line(surface, color, (0, y), (width, y))

    pygame.image.save(surface, output_path)

if __name__ == '__main__':
    pygame.init()

    # ç”ŸæˆæŒ‰é’®
    button_dir = Path('assets/ui/buttons')
    button_dir.mkdir(parents=True, exist_ok=True)

    generate_button_placeholder(200, 50, 'Start Game', button_dir)
    generate_button_placeholder(200, 50, 'Exit Game', button_dir)

    # ç”ŸæˆèƒŒæ™¯
    bg_dir = Path('assets/ui/backgrounds')
    bg_dir.mkdir(parents=True, exist_ok=True)

    generate_background_placeholder(
        800, 600,
        [(80, 50, 30), (120, 80, 50)],
        bg_dir / 'main_menu_bg.png'
    )

    print("âœ“ å ä½ç¬¦ç”Ÿæˆå®Œæˆ")
```

---

## 5. è®¾è®¡å†³ç­–

### 5.1 å…³é”®å†³ç­–è®°å½•

#### å†³ç­–1: åœºæ™¯ç®¡ç†æ¶æ„

**é—®é¢˜**: å¦‚ä½•ç®¡ç†å¤šä¸ªæ¸¸æˆåœºæ™¯å’Œå¤æ‚çš„åˆ‡æ¢é€»è¾‘ï¼Ÿ

**é€‰é¡¹**:
- A. ç®€å•çš„çŠ¶æ€æœºï¼ˆif-elseåˆ‡æ¢ï¼‰
- B. åœºæ™¯æ ˆ + åœºæ™¯åŸºç±»ï¼ˆæ¨èï¼‰
- C. ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼ˆå¦‚PursuedPyBearï¼‰

**å†³ç­–**: é€‰æ‹©æ–¹æ¡ˆB

**ç†ç”±**:
- åœºæ™¯æ ˆæ”¯æŒæš‚åœ/æ¢å¤åœºæ™¯ï¼ˆå¦‚å¼¹å‡ºå¯¹è¯æ¡†ï¼‰
- åœºæ™¯åŸºç±»ç»Ÿä¸€ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ä¾¿äºæ‰©å±•æ–°åœºæ™¯
- ä¸ä¾èµ–å¤–éƒ¨æ¡†æ¶ï¼Œä¿æŒè½»é‡

#### å†³ç­–2: å…³å¡ç³»ç»Ÿæ¨¡å¼

**é—®é¢˜**: ä½¿ç”¨å›ºå®šé…ç½®å…³å¡è¿˜æ˜¯åŠ¨æ€ç”Ÿæˆå…³å¡ï¼Ÿ

**é€‰é¡¹**:
- A. ä»…å›ºå®šé…ç½®ï¼ˆéœ€è¦ç­–åˆ’å¤§é‡é…ç½®ï¼‰
- B. ä»…åŠ¨æ€ç”Ÿæˆï¼ˆç¼ºå°‘ç²¾å¿ƒè®¾è®¡ï¼‰
- C. æ··åˆæ¨¡å¼ï¼ˆæ¨èï¼‰

**å†³ç­–**: é€‰æ‹©æ–¹æ¡ˆC

**ç†ç”±**:
- å‰æœŸä½¿ç”¨åŠ¨æ€ç”Ÿæˆï¼Œå¿«é€ŸéªŒè¯ç©æ³•
- åæœŸå¯é…ç½®ç²¾å“å…³å¡ï¼Œæå‡ä½“éªŒ
- æ”¯æŒæ— é™æ¨¡å¼ï¼ˆåŠ¨æ€ç”Ÿæˆï¼‰å’Œå…³å¡æ¨¡å¼ï¼ˆé…ç½®ï¼‰å…±å­˜

#### å†³ç­–3: å¤±è´¥æ¡ä»¶

**é—®é¢˜**: æ¸¸æˆæ˜¯å¦éœ€è¦å¤±è´¥æ¡ä»¶ï¼Ÿ

**é€‰é¡¹**:
- A. æ— å¤±è´¥æ¡ä»¶ï¼Œä¼‘é—²ç©æ³•
- B. ç§»åŠ¨æ¬¡æ•°é™åˆ¶
- C. æ—¶é—´é™åˆ¶ï¼ˆæ¨èï¼‰âœ…

**å†³ç­–**: é€‰æ‹©æ–¹æ¡ˆC - æ·»åŠ å€’è®¡æ—¶æœºåˆ¶

**ç†ç”±**:
- å¢åŠ æ¸¸æˆæŒ‘æˆ˜æ€§å’Œç´§è¿«æ„Ÿ
- ä¸åŒéš¾åº¦æœ‰ä¸åŒçš„æ—¶é—´é™åˆ¶ï¼Œä½“ç°éš¾åº¦å·®å¼‚
- æ—¶é—´å‹åŠ›æ¯”ç§»åŠ¨æ¬¡æ•°é™åˆ¶æ›´ç›´è§‚
- å¤±è´¥åå¯é‡è¯•ï¼Œä¸å½±å“æ¸¸æˆä½“éªŒ

**æ—¶é—´é™åˆ¶**:
- ç®€å•: 60ç§’
- æ™®é€š: 45ç§’
- å›°éš¾: 30ç§’
- åœ°ç‹±: 15ç§’

#### å†³ç­–4: æ‰“åŒ…æ–¹æ¡ˆ

**é—®é¢˜**: å¦‚ä½•æ‰“åŒ…å‘å¸ƒæ¸¸æˆï¼Ÿ

**é€‰é¡¹**:
- A. PyInstallerï¼ˆæ¨èï¼‰
- B. cx_Freeze
- C. Nuitka

**å†³ç­–**: é€‰æ‹©æ–¹æ¡ˆA

**ç†ç”±**:
- æˆç†Ÿç¨³å®šï¼Œæ”¯æŒPygame
- ç¤¾åŒºæ´»è·ƒï¼Œé—®é¢˜æ˜“è§£å†³
- æ”¯æŒå•æ–‡ä»¶æ‰“åŒ…

### 5.2 å·²ç¡®è®¤å†³ç­–

1. **å…³å¡æ€»æ•°**: âœ… æ¯ä¸ªéš¾åº¦10ä¸ªå›ºå®šé…ç½®å…³å¡
   - å†³ç­–ï¼š2026-01-23
   - è¯´æ˜ï¼š4ä¸ªéš¾åº¦ Ã— 10å…³å¡ = 40ä¸ªé…ç½®å…³å¡

2. **æœ€ä¼˜è§£è®¡ç®—**: âœ… ä½¿ç”¨V3ç”Ÿæˆå™¨è®°å½•çš„è·¯å¾„é•¿åº¦ä½œä¸ºå‚è€ƒ
   - å†³ç­–ï¼š2026-01-23
   - è¯´æ˜ï¼šç”Ÿæˆæ—¶è®°å½•ï¼Œä½œä¸ºæ˜Ÿçº§è¯„åˆ†ä¾æ®

3. **å¤šè¯­è¨€æ”¯æŒ**: âœ… é¢„ç•™æ¥å£ï¼Œé¦–ç‰ˆä»…ä¸­æ–‡
   - å†³ç­–ï¼š2026-01-23
   - è¯´æ˜ï¼šv1.0ä»…ä¸­æ–‡ï¼Œv1.2æ”¯æŒå¤šè¯­è¨€

4. **æ‰“åŒ…å¹³å°**: âœ… ä»…Windowså¹³å°
   - å†³ç­–ï¼š2026-01-23
   - è¯´æ˜ï¼šv1.0ä»…Windowsï¼Œåç»­ç‰ˆæœ¬æ”¯æŒè·¨å¹³å°

---

## 6. é£é™©ä¸é™åˆ¶

### 6.1 æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| åœºæ™¯åˆ‡æ¢æ€§èƒ½é—®é¢˜ | ä¸­ | ä½ | ä½¿ç”¨èµ„æºé¢„åŠ è½½ï¼Œä¼˜åŒ–åˆ‡æ¢åŠ¨ç”» |
| å­˜æ¡£æ•°æ®æŸå | é«˜ | ä½ | æ·»åŠ æ•°æ®æ ¡éªŒï¼Œå¤‡ä»½æœºåˆ¶ |
| æ‰“åŒ…åèµ„æºè·¯å¾„é”™è¯¯ | é«˜ | ä¸­ | ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œå……åˆ†æµ‹è¯• |
| UIé€‚é…ä¸åŒåˆ†è¾¨ç‡ | ä¸­ | ä¸­ | å›ºå®šåˆ†è¾¨ç‡ï¼ˆ800Ã—600ï¼‰ï¼ŒåæœŸæ”¯æŒç¼©æ”¾ |

### 6.2 å¼€å‘é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| UIè®¾è®¡èµ„æºä¸è¶³ | ä¸­ | é«˜ | ä½¿ç”¨å ä½ç¬¦ï¼Œé¢„ç•™é…ç½®æ¥å£ |
| éŸ³æ•ˆèµ„æºç¼ºå¤± | ä½ | ä¸­ | ä½¿ç”¨ä¸´æ—¶éŸ³æ•ˆï¼ŒåæœŸæ›¿æ¢ |
| æ—¶é—´ä¸è¶³ | é«˜ | ä¸­ | åˆ†é˜¶æ®µäº¤ä»˜ï¼Œä¼˜å…ˆæ ¸å¿ƒåŠŸèƒ½ |

### 6.3 é™åˆ¶

**å½“å‰ç‰ˆæœ¬é™åˆ¶**:
1. å›ºå®šåˆ†è¾¨ç‡ï¼ˆ800Ã—600ï¼‰
2. ä»…æ”¯æŒWindowså¹³å°æ‰“åŒ…
3. æ— è”ç½‘åŠŸèƒ½
4. æ— å…³å¡ç¼–è¾‘å™¨
5. æ— æˆå°±ç³»ç»Ÿ

**åæœŸå¯æ‰©å±•**:
- å“åº”å¼UIï¼ˆæ”¯æŒä¸åŒåˆ†è¾¨ç‡ï¼‰
- è·¨å¹³å°æ‰“åŒ…ï¼ˆmacOS, Linuxï¼‰
- å…³å¡åˆ†äº«åŠŸèƒ½
- å†…ç½®å…³å¡ç¼–è¾‘å™¨
- ç»Ÿè®¡å’Œæˆå°±ç³»ç»Ÿ

---

## 7. å¼€å‘è®¡åˆ’

### 7.1 é˜¶æ®µåˆ’åˆ†

#### é˜¶æ®µ1: UIç»„ä»¶åº“å¼€å‘ï¼ˆWeek 1-2ï¼‰
- [ ] åŸºç¡€UIç»„ä»¶å®ç°
- [ ] å¸ƒå±€ç®¡ç†å™¨
- [ ] èµ„æºç®¡ç†ç³»ç»Ÿä¼˜åŒ–
- [ ] å ä½ç¬¦èµ„æºç”Ÿæˆ

#### é˜¶æ®µ2: åœºæ™¯ç³»ç»Ÿå¼€å‘ï¼ˆWeek 3-4ï¼‰
- [ ] åœºæ™¯åŸºç±»å’Œç®¡ç†å™¨
- [ ] å¯åŠ¨åœºæ™¯ï¼ˆMainMenuSceneï¼‰
- [ ] åŠ è½½åœºæ™¯ï¼ˆLoadingSceneï¼‰
- [ ] ç»“ç®—åœºæ™¯ï¼ˆResultSceneï¼‰

#### é˜¶æ®µ3: æ¸¸æˆåœºæ™¯é‡æ„ï¼ˆWeek 5ï¼‰
- [ ] æ¸¸æˆåœºæ™¯å±‚çº§ç³»ç»Ÿ
- [ ] ä¸ç°æœ‰GameControlleré›†æˆ
- [ ] æ–°å¢UIå…ƒç´ 
- [ ] è°ƒè¯•æ¨¡å¼å¼€å…³

#### é˜¶æ®µ4: è¿›åº¦ç³»ç»Ÿå¼€å‘ï¼ˆWeek 6ï¼‰
- [ ] å…³å¡è¿›åº¦ç®¡ç†
- [ ] å­˜æ¡£ç³»ç»Ÿ
- [ ] è§£é”ç³»ç»Ÿ
- [ ] æ˜Ÿçº§è¯„åˆ†

#### é˜¶æ®µ5: æ‰“åŒ…å‘å¸ƒï¼ˆWeek 7ï¼‰
- [ ] æ„å»ºè„šæœ¬
- [ ] PyInstalleré…ç½®
- [ ] CI/CDé…ç½®
- [ ] å‘å¸ƒæµ‹è¯•

#### é˜¶æ®µ6: ä¼˜åŒ–ä¸æµ‹è¯•ï¼ˆWeek 8ï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] Bugä¿®å¤
- [ ] å®Œæ•´æµç¨‹æµ‹è¯•
- [ ] æ–‡æ¡£å®Œå–„

### 7.2 é‡Œç¨‹ç¢‘

- **Week 2**: UIç»„ä»¶åº“å®Œæˆ âœ“
- **Week 4**: åœºæ™¯ç³»ç»Ÿå®Œæˆ âœ“
- **Week 5**: æ¸¸æˆåœºæ™¯é‡æ„å®Œæˆ âœ“
- **Week 6**: è¿›åº¦ç³»ç»Ÿå®Œæˆ âœ“
- **Week 7**: å¯å‘å¸ƒç‰ˆæœ¬ âœ“
- **Week 8**: æ­£å¼å‘å¸ƒ ğŸ¯

### 7.3 èµ„æºéœ€æ±‚

**å¼€å‘èµ„æº**:
- 1åç¨‹åºå‘˜ï¼ˆå…¨èŒï¼‰
- UIç¾æœ¯å ä½ç¬¦ç”Ÿæˆï¼ˆå·¥å…·ç”Ÿæˆï¼‰
- æ­£å¼ç¾æœ¯èµ„æºï¼ˆåæœŸé…ç½®ï¼‰

**å·¥å…·è½¯ä»¶**:
- Python 3.11+
- Pygame 2.5+
- PyInstaller
- VS Code / PyCharm

**æµ‹è¯•è®¾å¤‡**:
- Windows 10/11
- ä¸åŒåˆ†è¾¨ç‡å±å¹•

---

## 8. éªŒæ”¶æ ‡å‡†

### 8.1 åŠŸèƒ½éªŒæ”¶

- [ ] æ‰€æœ‰åœºæ™¯å¯æ­£å¸¸åˆ‡æ¢
- [ ] UIäº¤äº’æµç•…ï¼Œæ— å¡é¡¿
- [ ] å…³å¡è§£é”é€»è¾‘æ­£ç¡®
- [ ] å­˜æ¡£ä¿å­˜å’ŒåŠ è½½æ­£å¸¸
- [ ] æ˜Ÿçº§è¯„åˆ†å‡†ç¡®
- [ ] æ‰“åŒ…åç¨‹åºå¯ç‹¬ç«‹è¿è¡Œ

### 8.2 æ€§èƒ½éªŒæ”¶

- [ ] åœºæ™¯åˆ‡æ¢æ—¶é—´ < 500ms
- [ ] æ¸¸æˆå¸§ç‡ç¨³å®š â‰¥ 60 FPS
- [ ] å†…å­˜å ç”¨ < 150MB
- [ ] ç¨‹åºå¯åŠ¨æ—¶é—´ < 3ç§’

### 8.3 è´¨é‡éªŒæ”¶

- [ ] ä»£ç ç¬¦åˆå¼€å‘è§„èŒƒ
- [ ] æ ¸å¿ƒæ¨¡å—æµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%
- [ ] æ— ä¸¥é‡Bug
- [ ] æ—¥å¿—è®°å½•å®Œæ•´
- [ ] æ–‡æ¡£é½å…¨

---

## 9. å‚è€ƒèµ„æ–™

### 9.1 é¡¹ç›®è§„èŒƒ
- [é¡¹ç›®è§„åˆ’æ€»çº²](../specifications/00_é¡¹ç›®è§„åˆ’æ€»çº².md)
- [ç›®å½•ç»“æ„è§„èŒƒ](../specifications/02_ç›®å½•ç»“æ„è§„èŒƒ.md)
- [å¼€å‘è§„èŒƒ](../specifications/05_å¼€å‘è§„èŒƒ.md)
- [æ¸¸æˆè®¾è®¡æ–‡æ¡£](æ´¾å¯¹æ¸¸æˆ%20-%20ä¿®å¤ç”µè·¯æ¿_è®¾è®¡æ–‡æ¡£.md)

### 9.2 æŠ€æœ¯æ–‡æ¡£
- [Pygameå®˜æ–¹æ–‡æ¡£](https://www.pygame.org/docs/)
- [PyInstalleræ–‡æ¡£](https://pyinstaller.org/en/stable/)

### 9.3 è®¾è®¡å‚è€ƒ
- åœºæ™¯ç®¡ç†æ¨¡å¼: Game Programming Patterns - State Pattern
- UIå¸ƒå±€: iOS Human Interface Guidelines
- è¿›åº¦ç³»ç»Ÿ: å…¸å‹æ‰‹æ¸¸å…³å¡ç³»ç»Ÿè®¾è®¡

---

## 10. æ–‡æ¡£å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹äºº | ä¿®æ”¹å†…å®¹ |
|------|------|--------|----------|
| v1.0.0 | 2026-01-23 | Claude Code | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´æ¸¸æˆä½“éªŒå‡çº§éœ€æ±‚æ–‡æ¡£ |

---

**é‡è¦æç¤º**:
1. æœ¬æ–‡æ¡£åŸºäºv0.2.0ç‰ˆæœ¬åˆ¶å®š
2. æ‰€æœ‰UIèµ„æºå…ˆä½¿ç”¨å ä½ç¬¦ï¼Œé¢„ç•™æ­£å¼èµ„æºæ¥å£
3. é‡ç‚¹æ˜¯å®Œæˆæ¸¸æˆæœºåˆ¶ï¼Œç¾æœ¯éŸ³æ•ˆåæœŸé…ç½®
4. éµå¾ªé¡¹ç›®è§„èŒƒï¼Œä¿æŒä»£ç è´¨é‡
