# 音效资源规范

## 文档版本
- **版本号**: v1.0.0
- **创建日期**: 2026-01-19
- **最后更新**: 2026-01-19
- **文档状态**: 正式版

---

## 1. 概述

### 1.1 目的
本规范定义项目所需的所有音频资源的技术标准、音效风格和交付要求，确保：
- 程序开发可以使用临时音效正常进行
- 外部音效制作者有明确的制作标准
- 最终音效可以无缝替换临时音效

### 1.2 资源使用策略
```
开发阶段使用临时音效 → 按规范制作正式音效 → 替换音频文件 → 无需修改代码
```

### 1.3 音效风格定位
- **整体氛围**: 工业蒸汽朋克、机械感、复古科技
- **音色特点**: 金属碰撞、齿轮转动、电流嗡鸣、蒸汽释放
- **动态范围**: 适中，不过于激烈
- **情感基调**: 专注、工业感、成就感

---

## 2. 技术规格总览

### 2.1 通用技术标准

| 规格项 | 要求 | 说明 |
|--------|------|------|
| **采样率** | 44.1 kHz | CD音质标准 |
| **位深度** | 16-bit | 足够的动态范围 |
| **声道** | 单声道（SFX）/ 立体声（BGM） | 性能优化 |
| **格式** | WAV（开发）/ OGG（发布） | WAV无损，OGG压缩 |
| **音量标准** | -6 dB 峰值 | 留余量避免削波 |

### 2.2 性能要求

| 性能指标 | 限制 | 原因 |
|---------|------|------|
| 音效时长 | ≤ 3秒 | 内存占用 |
| BGM时长 | 1-3分钟（循环） | 文件大小 |
| 单个音效文件 | ≤ 500 KB（OGG） | 加载速度 |
| 总音频资源 | ≤ 20 MB | 安装包体积 |
| 同时播放音效 | ≤ 8个 | CPU负载 |

---

## 3. 音效资源 (SFX)

### 3.1 技术规格

| 规格项 | 数值 |
|--------|------|
| **采样率** | 44.1 kHz |
| **位深度** | 16-bit |
| **声道** | 单声道（Mono） |
| **格式** | WAV（开发）/ OGG（发布） |
| **时长** | 0.1 - 3.0 秒 |
| **音量** | -6 dB 峰值 |

### 3.2 必需音效清单

#### 核心交互音效（第一优先级）

| 文件名 | 用途 | 时长 | 风格描述 | 参考 |
|--------|------|------|----------|------|
| `sfx_tile_rotate.wav` | 瓦片旋转 | 0.3-0.5s | 齿轮转动、金属摩擦 | 发条玩具上弦 |
| `sfx_tile_click.wav` | 点击瓦片 | 0.1-0.2s | 清脆的机械按钮音 | 老式打字机按键 |
| `sfx_circuit_connect.wav` | 电路连通 | 0.5-0.8s | 电流嗡鸣、轻微电弧 | 开关合闸声 |
| `sfx_victory.wav` | 关卡完成 | 2.0-3.0s | 胜利音效、蒸汽释放 | 火车汽笛 + 机械启动 |
| `sfx_ui_hover.wav` | UI悬停 | 0.1-0.2s | 轻微金属碰撞 | 铃铛轻响 |
| `sfx_ui_click.wav` | UI点击 | 0.2-0.3s | 按钮按下、机械反馈 | 继电器切换 |

#### 辅助音效（第二优先级）

| 文件名 | 用途 | 时长 | 风格描述 |
|--------|------|------|----------|
| `sfx_level_start.wav` | 关卡开始 | 1.0-1.5s | 机械启动、齿轮咬合 |
| `sfx_error.wav` | 错误提示 | 0.3-0.5s | 低沉的嗡鸣、错误音 |
| `sfx_current_flow.wav` | 电流流动 | 循环 | 持续的电流声（可循环） |
| `sfx_panel_open.wav` | 面板打开 | 0.4-0.6s | 金属滑动、铰链声 |
| `sfx_panel_close.wav` | 面板关闭 | 0.4-0.6s | 金属滑动、卡扣声 |

### 3.3 音效设计要求

#### 旋转音效 (Rotate)
- **音色**: 齿轮转动、金属摩擦
- **节奏**: 快速但不急促
- **层次**: 可包含起始click + 旋转过程 + 结束卡入
- **变化**: 可制作2-3个变体，避免单调

#### 点击音效 (Click)
- **音色**: 清脆、干净的机械音
- **时长**: 非常短促（100-200ms）
- **音量**: 适中，不刺耳
- **变化**: 可有轻微随机变化

#### 连通音效 (Connect)
- **音色**: 电流嗡鸣、能量传递感
- **动态**: 渐强，从小到稍大
- **特点**: 暖色调的电子音
- **细节**: 可加入轻微的电弧crackle

#### 胜利音效 (Victory)
- **音色**: 蒸汽释放 + 齿轮运转 + 音乐性旋律
- **结构**: 起始爆发 → 持续 → 尾音
- **情感**: 成就感、满足感
- **长度**: 足够让玩家感受到奖励，但不过长

#### UI音效 (Hover/Click)
- **音色**: 精致、细腻的金属音
- **音量**: 比游戏音效更轻
- **风格**: 现代但不失工业感
- **一致性**: 同一组UI音效风格统一

### 3.4 音效分层（可选增强）

为丰富音效，可提供分层版本：

| 层次 | 说明 | 应用 |
|------|------|------|
| 基础层 | 主要音效 | 始终播放 |
| 细节层 | 细节装饰 | 根据设置播放 |
| 变体 | 同音效的不同版本 | 随机选择播放 |

**命名格式**: `sfx_[name]_[layer]_[variant].wav`
- 示例：`sfx_tile_rotate_base_01.wav`, `sfx_tile_rotate_detail_01.wav`

### 3.5 临时音效说明

**开发阶段可使用**:
- 在线音效库的免费资源（如freesound.org）
- 简单的合成音效（如正弦波、白噪声）
- 开源游戏音效包

**推荐临时资源库**:
- [Freesound](https://freesound.org/) - CC授权音效
- [Zapsplat](https://www.zapsplat.com/) - 免费音效库
- [Sonniss GameAudioGDC](https://sonniss.com/gameaudiogdc) - 年度免费包

**临时资源命名**:
- 添加 `_temp` 后缀，如 `sfx_tile_rotate_temp.wav`

---

## 4. 背景音乐 (BGM)

### 4.1 技术规格

| 规格项 | 数值 |
|--------|------|
| **采样率** | 44.1 kHz |
| **位深度** | 16-bit |
| **声道** | 立体声（Stereo） |
| **格式** | WAV（开发）/ OGG（发布） |
| **时长** | 60-180秒（循环） |
| **音量** | -3 dB 峰值（比SFX响） |
| **循环** | 无缝循环 |

### 4.2 BGM清单

| 文件名 | 场景 | 时长 | 风格描述 | BPM |
|--------|------|------|----------|-----|
| `bgm_main_menu.ogg` | 主菜单 | 90-120s | 轻松、欢迎感 | 100-120 |
| `bgm_gameplay.ogg` | 游戏中 | 120-180s | 专注、工业氛围 | 80-100 |
| `bgm_victory.ogg` | 胜利界面 | 30-60s | 欢快、成就感 | 120-140 |

### 4.3 音乐风格要求

#### 主菜单音乐
- **基调**: 轻松但有工业感
- **节奏**: 适中，不急促
- **乐器**: 金属打击乐、工业音效、简单旋律
- **循环**: 自然、不突兀

#### 游戏中音乐
- **基调**: 专注、沉浸、不干扰思考
- **节奏**: 稳定、舒缓
- **乐器**: 环境音、低频节奏、机械循环音
- **特点**:
  - 可作为白噪音般的背景
  - 不抢耳，但有存在感
  - 蒸汽朋克工业氛围

#### 胜利音乐
- **基调**: 欢快、奖励感
- **节奏**: 明快、有动感
- **乐器**: 旋律性乐器 + 打击乐
- **长度**: 短小精悍

### 4.4 游戏中BGM音量控制

**重要**: 游戏UI激活时，BGM音量降至20%

**实现说明**:
- 程序会自动控制音量淡入淡出
- 音乐制作时保持正常音量即可
- 淡入淡出时长：500ms

### 4.5 循环制作要求

**无缝循环要点**:
1. 开头和结尾音调、节奏匹配
2. 避免开头/结尾有明显的淡入淡出
3. 测试循环播放，确保自然

**测试方法**:
- 连续播放3-5遍
- 注意接缝处是否突兀
- 检查是否有咔嗒声

---

## 5. 音效实现规范

### 5.1 音量平衡

#### 相对音量层级
```
BGM（游戏中）     : 0.2  (20%)
BGM（菜单/胜利）   : 0.8  (80%)
SFX（核心交互）    : 1.0  (100%)
SFX（UI）         : 0.6  (60%)
SFX（环境）       : 0.4  (40%)
```

#### 音量标准化
- 所有音效峰值保持在 -6 dB
- BGM峰值保持在 -3 dB
- 由程序代码控制最终音量

### 5.2 音效混合

**同时播放限制**:
- 最多8个音效同时播放
- 相同音效间隔至少50ms
- 低优先级音效可被中断

**优先级定义**:
1. 胜利音效（最高）
2. 连通音效
3. 旋转/点击音效
4. UI音效
5. 环境音效（最低）

### 5.3 音效变化

**避免单调的策略**:
1. 制作2-3个变体，随机播放
2. 随机音高变化（±5%）
3. 随机音量变化（±10%）
4. 随机左右声道偏移（可选）

---

## 6. 文件命名与组织

### 6.1 命名规范

**格式**: `[类型]_[名称]_[变体].扩展名`

**类型前缀**:
- `sfx_` - 音效
- `bgm_` - 背景音乐
- `amb_` - 环境音（如需要）

**命名示例**:
```
✅ 正确命名:
sfx_tile_rotate.wav
sfx_tile_rotate_01.wav    # 变体1
sfx_tile_rotate_02.wav    # 变体2
bgm_gameplay.ogg
bgm_main_menu_temp.wav    # 临时资源

❌ 错误命名:
Rotate.wav                 # 缺少前缀
sfx-tile-rotate.wav        # 不要用连字符
sfx_tile_rotate_sound.wav  # 不要有冗余词
旋转音效.wav               # 不要用中文
```

### 6.2 目录结构

```
assets/audio/
├── sfx/                        # 音效目录
│   ├── gameplay/               # 游戏玩法音效
│   │   ├── sfx_tile_rotate.wav
│   │   ├── sfx_tile_rotate_01.wav
│   │   ├── sfx_tile_rotate_02.wav
│   │   ├── sfx_tile_click.wav
│   │   ├── sfx_circuit_connect.wav
│   │   └── sfx_victory.wav
│   ├── ui/                     # UI音效
│   │   ├── sfx_ui_hover.wav
│   │   ├── sfx_ui_click.wav
│   │   ├── sfx_panel_open.wav
│   │   └── sfx_panel_close.wav
│   └── ambient/                # 环境音（可选）
│       └── sfx_current_flow.wav
└── bgm/                        # 背景音乐目录
    ├── bgm_main_menu.ogg
    ├── bgm_gameplay.ogg
    └── bgm_victory.ogg
```

---

## 7. 音频格式转换

### 7.1 开发阶段使用WAV

**原因**:
- 无损质量
- 易于编辑
- 快速迭代

### 7.2 发布阶段转换为OGG

**转换标准**:
- 质量等级：Quality 6-8
- 比特率：约 160-192 kbps
- 保持44.1kHz采样率

**转换工具**:
- Audacity（免费）
- FFmpeg（命令行）
- Adobe Audition（专业）

**FFmpeg转换命令**:
```bash
# 音效转换（质量7）
ffmpeg -i input.wav -codec:a libvorbis -q:a 7 output.ogg

# BGM转换（质量8）
ffmpeg -i input.wav -codec:a libvorbis -q:a 8 output.ogg
```

---

## 8. 资源交付清单

### 8.1 第一阶段交付（MVP必需）

**优先级：最高**

- [ ] 核心音效（6个）
  - [ ] `sfx_tile_rotate.wav`
  - [ ] `sfx_tile_click.wav`
  - [ ] `sfx_circuit_connect.wav`
  - [ ] `sfx_victory.wav`
  - [ ] `sfx_ui_hover.wav`
  - [ ] `sfx_ui_click.wav`

- [ ] 游戏BGM（1个）
  - [ ] `bgm_gameplay.ogg`

**文件数量**: 7个文件

### 8.2 第二阶段交付（完整功能）

**优先级：高**

- [ ] 辅助音效（5个）
  - [ ] `sfx_level_start.wav`
  - [ ] `sfx_error.wav`
  - [ ] `sfx_current_flow.wav`
  - [ ] `sfx_panel_open.wav`
  - [ ] `sfx_panel_close.wav`

- [ ] 完整BGM（2个）
  - [ ] `bgm_main_menu.ogg`
  - [ ] `bgm_victory.ogg`

**文件数量**: 7个文件

### 8.3 第三阶段交付（优化与增强）

**优先级：中**

- [ ] 音效变体（每个核心音效2-3个变体）
- [ ] 分层音效（base/detail层）
- [ ] 环境音（如需要）

**文件数量**: 约15-20个文件

---

## 9. 制作工具推荐

### 9.1 录音与编辑

| 工具 | 类型 | 推荐用途 |
|------|------|----------|
| **Audacity** | 免费开源 | 基础音频编辑 |
| **Reaper** | 付费（低价） | 专业音频制作 |
| **Adobe Audition** | 订阅制 | 专业音频编辑 |
| **FL Studio** | 付费 | 音乐制作、音效合成 |

### 9.2 音效合成

| 工具 | 用途 |
|------|------|
| **BFXR** | 复古游戏音效生成器（免费） |
| **ChipTone** | 8位音效生成器（免费） |
| **Vital** | 免费合成器插件 |
| **Serum** | 专业合成器（付费） |

### 9.3 音效库

| 资源库 | 说明 |
|--------|------|
| **Freesound** | 社区上传，CC授权 |
| **Zapsplat** | 免费注册使用 |
| **Sonniss GameAudioGDC** | 年度免费包 |
| **Epic Sound Effects** | 付费专业库 |

---

## 10. 质量验收标准

### 10.1 技术验收

- [ ] 采样率44.1kHz
- [ ] 位深度16-bit
- [ ] 声道正确（SFX单声道，BGM立体声）
- [ ] 音量峰值符合标准
- [ ] 无削波失真
- [ ] 无背景噪音
- [ ] 无咔嗒声、爆音
- [ ] 文件格式正确
- [ ] 文件命名规范
- [ ] 目录结构正确

### 10.2 音质验收

- [ ] 声音清晰无杂音
- [ ] 音色符合风格定位
- [ ] 动态范围合理
- [ ] 频率分布均衡
- [ ] 立体声声场自然（BGM）
- [ ] 循环无缝（BGM）

### 10.3 功能验收

- [ ] 在游戏中播放正常
- [ ] 音量平衡合理
- [ ] 与其他音效混合良好
- [ ] 循环播放无问题（BGM）
- [ ] 同时播放不混乱
- [ ] 无版权问题

---

## 11. 音效测试指南

### 11.1 单独测试

**每个音效单独测试**:
1. 音量是否合适
2. 音色是否符合预期
3. 时长是否合理
4. 是否有杂音

### 11.2 混合测试

**多个音效同时播放测试**:
1. 点击3个瓦片 → 3个旋转音效同时播放
2. 旋转的同时连通 → 混合效果
3. BGM + 多个SFX → 整体平衡

### 11.3 循环测试

**BGM循环测试**:
1. 连续播放5遍
2. 检查接缝是否自然
3. 长时间听是否烦躁

### 11.4 性能测试

**资源占用测试**:
1. 加载时间是否快速
2. 内存占用是否合理
3. CPU占用是否正常

---

## 12. 资源替换流程

### 12.1 替换步骤

```
1. 确认新音效符合规范
2. 转换为正确格式（OGG）
3. 使用相同文件名覆盖临时资源
4. 清除音频缓存（如有）
5. 运行游戏测试所有音效
6. 调整音量（如需要）
7. 提交到版本控制
```

### 12.2 注意事项

**✅ 正确做法**:
- 保持文件名一致
- 保持采样率一致
- 保持声道数一致
- 批量替换后全面测试

**❌ 避免错误**:
- 不要修改文件名
- 不要改变采样率
- 不要改变声道数（Mono/Stereo）
- 不要只替换部分音效

---

## 13. 音效风格参考

### 13.1 参考游戏

推荐参考以下游戏的音效风格：

| 游戏 | 参考要点 |
|------|----------|
| **Machinarium** | 工业机械音效、蒸汽朋克氛围 |
| **SteamWorld** | 金属质感音效、齿轮转动 |
| **The Room** | 精密机械音效、点击反馈 |
| **Portal 2** | 科技感音效、按钮交互 |

### 13.2 音效特征关键词

**核心关键词**:
- 工业 (Industrial)
- 机械 (Mechanical)
- 蒸汽朋克 (Steampunk)
- 齿轮 (Gear)
- 金属 (Metal)
- 电流 (Electric)
- 铜制 (Copper/Brass)
- 复古科技 (Retro-tech)

---

## 14. 常见问题

### Q1: 为什么音效用单声道，BGM用立体声？
**A**: 音效通常短促，单声道可节省50%空间且不影响体验。BGM需要丰富的声场，所以用立体声。

### Q2: 如何制作无缝循环的BGM？
**A**:
1. 确保开头和结尾节拍对齐
2. 结尾渐弱到与开头相同的音量
3. 使用DAW的循环工具检查
4. 多次测试直到自然

### Q3: 临时音效可以用合成的吗？
**A**: 可以。简单的合成音（如正弦波、白噪声）足够用于开发测试，关键是文件名和格式正确。

### Q4: 音效变体是必须的吗？
**A**: 第一阶段不是必须的。但为了避免重复播放的单调感，建议在第三阶段添加变体。

### Q5: 如何控制BGM在游戏中降到20%？
**A**: 这由程序代码控制，音效制作者只需提供正常音量的音乐文件即可。

---

## 15. 联系与反馈

- **音效问题**: 联系项目音效负责人
- **技术问题**: 联系开发负责人
- **规范更新**: 通过issue或PR提出

---

## 16. 附录

### 16.1 音量参考表

| 类型 | 峰值 (dB) | RMS (dB) | 备注 |
|------|----------|----------|------|
| SFX | -6 | -18 至 -12 | 留余量避免削波 |
| BGM | -3 | -16 至 -10 | 比SFX稍响 |
| UI音效 | -9 | -21 至 -15 | 更轻柔 |

### 16.2 频率分布建议

**音效（SFX）**:
- 主体频率：500 Hz - 5 kHz
- 低频：适度（不过重）
- 高频：清晰但不刺耳

**背景音乐（BGM）**:
- 均衡分布
- 低频：稳定的节奏感
- 中频：旋律主体
- 高频：细节装饰

### 16.3 参考资料

- [游戏音效设计基础](https://www.google.com/search?q=game+sound+design+basics)
- [音频循环制作教程](https://www.google.com/search?q=seamless+audio+loop+tutorial)
- [音效混音技巧](https://www.google.com/search?q=game+audio+mixing+tips)
- [蒸汽朋克音效风格](https://www.google.com/search?q=steampunk+sound+design)

---

## 17. 文档变更记录

| 版本 | 日期 | 修改人 | 修改内容 |
|------|------|--------|----------|
| v1.0.0 | 2026-01-19 | Claude | 初始版本，定义完整的音效资源规范 |

---

**重要提示**:
1. 本规范是音效制作的强制标准
2. 所有音效必须通过验收才能使用
3. 临时音效必须标注，避免混淆
4. 音效替换不应影响游戏功能
5. BGM音量控制由程序实现，音效制作者无需特殊处理
